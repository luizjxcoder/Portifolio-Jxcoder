<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portf√≥lio Moderno</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'custom-gray': '#f5f5f5',
                        'custom-purple': '#8e44ad',
                        'custom-blue': '#02C2E9'
                    },
                    fontFamily: {
                        'sans': ['Montserrat', 'sans-serif']
                    },
                    screens: {
                        'xs': '475px'
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-border {
            background: linear-gradient(135deg, #8e44ad, #02C2E9);
            padding: 2px;
            border-radius: 12px;
        }
        
        .gradient-border-content {
            background: white;
            border-radius: 10px;
            height: 100%;
        }
        
        .slide-container {
            position: relative;
            overflow: hidden;
        }
        
        .slide {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            background: linear-gradient(135deg, #8e44ad, #02C2E9);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Slider personalizado */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: #e5e7eb;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8e44ad, #02C2E9);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8e44ad, #02C2E9);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-custom-gray min-h-screen">
    <!-- Menu Fixo -->
    <nav class="fixed top-0 left-0 right-0 bg-white shadow-lg z-50">
        <div class="max-w-[1700px] mx-auto px-3 sm:px-4 lg:px-8">
            <div class="flex justify-between items-center h-14 sm:h-16">
                <!-- Logo e T√≠tulo -->
                <div class="flex-shrink-0 flex items-center space-x-2 sm:space-x-3 min-w-0">
                    <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-custom-purple to-custom-blue rounded-full flex items-center justify-center shadow-lg flex-shrink-0">
                        <svg class="w-4 h-4 sm:w-6 sm:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                    </div>
                    <h1 class="text-sm sm:text-lg lg:text-2xl font-bold bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent truncate">
                        <span class="hidden sm:inline">Meu Portf√≥lio JXCoder</span>
                        <span class="sm:hidden">JXCoder</span>
                    </h1>
                </div>

                <!-- Menu Desktop -->
                <div class="hidden lg:block">
                    <div class="flex items-baseline space-x-6 xl:space-x-8">
                        <a href="#" class="nav-link active text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('home')">Home</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('projects')">Projetos</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('about')">Sobre</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('contact')">Contato</a>
                    </div>
                </div>

                <!-- Bot√µes Mobile/Tablet -->
                <div class="lg:hidden flex items-center space-x-2 flex-shrink-0">
                    <button onclick="openProjectModal()" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-2 sm:px-3 py-1.5 sm:py-2 rounded-md sm:rounded-lg font-medium hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-xs sm:text-sm whitespace-nowrap">
                        <span class="hidden xs:inline">+ Projeto</span>
                        <span class="xs:hidden">+</span>
                    </button>
                    <button onclick="toggleMobileMenu()" class="text-gray-700 hover:text-custom-blue p-1">
                        <svg class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Menu Mobile -->
        <div id="mobile-menu" class="lg:hidden hidden">
            <div class="px-3 pt-2 pb-3 space-y-1 sm:px-4 bg-white border-t shadow-lg">
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue hover:bg-gray-50 rounded-md transition-colors" onclick="showSection('home'); toggleMobileMenu()">üè† Home</a>
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue hover:bg-gray-50 rounded-md transition-colors" onclick="showSection('projects'); toggleMobileMenu()">üìÅ Projetos</a>
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue hover:bg-gray-50 rounded-md transition-colors" onclick="showSection('about'); toggleMobileMenu()">üë§ Sobre</a>
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue hover:bg-gray-50 rounded-md transition-colors" onclick="showSection('contact'); toggleMobileMenu()">üìß Contato</a>
            </div>
        </div>
    </nav>

    <!-- Conte√∫do Principal -->
    <main class="pt-16 sm:pt-20 pb-4 sm:pb-8">
        <!-- Se√ß√£o Home -->
        <section id="home" class="section-content">
            <div class="max-w-[1700px] mx-auto px-3 sm:px-4 lg:px-8">
                <!-- T√≠tulo e Controles de Layout para Dashboard -->
                <div class="mb-4 sm:mb-6 lg:mb-8 flex flex-col gap-3 sm:gap-4">
                    <!-- T√≠tulo -->
                    <div class="text-center sm:text-left">
                        <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800">
                            <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Dashboard</span>
                        </h2>
                    </div>
                    
                    <!-- Controles -->
                    <div class="flex flex-col sm:flex-row gap-2 sm:gap-3">
                        <!-- Bot√µes de Exporta√ß√£o -->
                        <div class="flex bg-white rounded-full shadow-sm border border-gray-200 p-1 overflow-x-auto">
                            <button onclick="exportToExcel()" class="flex items-center px-2 sm:px-3 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800 hover:bg-gray-50 whitespace-nowrap">
                                <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                <span class="hidden xs:inline">Excel</span>
                                <span class="xs:hidden">XLS</span>
                            </button>
                            <button onclick="exportToJSON()" class="flex items-center px-2 sm:px-3 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800 hover:bg-gray-50 whitespace-nowrap">
                                <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                JSON
                            </button>
                            <button onclick="openSupabaseConfig()" class="flex items-center px-2 sm:px-3 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white whitespace-nowrap">
                                <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                                </svg>
                                Backup
                            </button>
                        </div>
                        
                        <!-- Controles de Layout -->
                        <div class="flex bg-white rounded-full shadow-sm border border-gray-200 p-1">
                            <button id="grid-view-btn" onclick="changeLayout('grid')" class="flex items-center px-2 sm:px-3 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white">
                                <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                                </svg>
                                <span class="hidden sm:inline">Grade</span>
                            </button>
                            <button id="list-view-btn" onclick="changeLayout('list')" class="flex items-center px-2 sm:px-3 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800">
                                <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                                </svg>
                                <span class="hidden sm:inline">Lista</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Layout Responsivo: Bot√£o + Cards e Formul√°rio -->
                <div class="flex flex-col xl:flex-row gap-3 sm:gap-4 lg:gap-6">
                    <!-- Sidebar com Formul√°rio (Esquerda em telas grandes) -->
                    <div id="form-sidebar" class="w-full xl:w-0 xl:flex-shrink-0 xl:sticky xl:top-24 xl:h-fit transition-all duration-500 ease-in-out overflow-hidden">
                        <!-- Formul√°rio para telas grandes (1280px+) -->
                        <div id="project-form-container" class="hidden xl:block gradient-border transition-all duration-500 ease-in-out" style="max-height: 0; opacity: 0;">
                            <div class="gradient-border-content p-4 lg:p-5">
                                <h3 class="text-base lg:text-lg font-bold text-gray-800 mb-4 lg:mb-5 text-center">Adicionar Novo Projeto</h3>
                                <form id="project-form" class="space-y-3">
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">T√≠tulo do Projeto</label>
                                        <input type="text" id="project-title" required class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Descri√ß√£o Curta</label>
                                        <textarea id="project-description" required rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm"></textarea>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Link do Projeto</label>
                                        <input type="url" id="project-link" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Imagens (m√∫ltiplas)</label>
                                        <input type="file" id="project-images" multiple accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                        <p class="text-xs text-gray-500 mt-1">M√∫ltiplas imagens para galeria</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Data de Cria√ß√£o</label>
                                        <input type="date" id="project-date" value="" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Progresso do Projeto</label>
                                        <div class="space-y-3">
                                            <div class="flex items-center gap-3">
                                                <div class="flex-1 relative">
                                                    <input type="range" id="project-progress" min="0" max="100" value="0" class="w-full h-3 bg-gray-200 rounded-full appearance-none cursor-pointer slider" style="background: linear-gradient(to right, #8e44ad 0%, #02C2E9 var(--progress, 0%), #e5e7eb var(--progress, 0%), #e5e7eb 100%);">
                                                    <div class="absolute -top-8 left-0 right-0 flex justify-between text-xs text-gray-500 pointer-events-none">
                                                        <span>0%</span>
                                                        <span>25%</span>
                                                        <span>50%</span>
                                                        <span>75%</span>
                                                        <span>100%</span>
                                                    </div>
                                                </div>
                                                <div class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-3 py-1 rounded-full text-sm font-bold min-w-[4rem] text-center">
                                                    <span id="progress-value">0%</span>
                                                </div>
                                            </div>
                                            <select id="project-status" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                                <option value="planning">üéØ Planejamento</option>
                                                <option value="development">‚ö° Em Desenvolvimento</option>
                                                <option value="testing">üß™ Em Testes</option>
                                                <option value="completed">‚úÖ Conclu√≠do</option>
                                                <option value="paused">‚è∏Ô∏è Pausado</option>
                                                <option value="cancelled">‚ùå Cancelado</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">V√≠deo (YouTube/Vimeo)</label>
                                        <input type="text" id="project-video" placeholder="Link do YouTube/Vimeo" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm mb-2">
                                        <input type="file" id="project-video-file" accept="video/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div class="flex gap-2 pt-2">
                                        <button type="submit" class="flex-1 bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2.5 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-sm">
                                            Adicionar
                                        </button>
                                        <button type="button" onclick="toggleProjectForm()" class="px-4 py-2.5 border border-gray-300 text-gray-700 rounded-full hover:bg-gray-50 transition-all duration-300 text-sm">
                                            Fechar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Container Principal: Bot√£o + Cards -->
                    <div id="main-content" class="flex-1 min-w-0 transition-all duration-500 ease-in-out">
                        <!-- Bot√£o New pr√≥ximo aos cards -->
                        <div class="hidden xl:flex items-center gap-4 mb-4 lg:mb-6">
                            <button id="toggle-form-btn" onclick="toggleProjectForm()" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2 px-3 rounded-lg font-medium hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center gap-2 text-sm">
                                <svg id="form-icon" class="w-4 h-4 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                <span id="form-btn-text">New</span>
                            </button>
                            <div class="h-px bg-gray-200 flex-1"></div>
                        </div>
                        
                        <!-- Grid de Projetos -->
                        <div id="projects-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3 sm:gap-4">
                            <!-- Projetos ser√£o inseridos aqui dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Projetos -->
        <section id="projects" class="section-content hidden">
            <div class="max-w-[1700px] mx-auto px-3 sm:px-4 lg:px-8">
                <!-- T√≠tulo e Controles de Layout para Projetos -->
                <div class="mb-4 sm:mb-6 lg:mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4">
                    <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800">
                        Meus <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Projetos</span>
                    </h2>
                    <div class="flex bg-white rounded-full shadow-sm border border-gray-200 p-1 w-full sm:w-auto">
                        <button id="projects-grid-view-btn" onclick="changeProjectsLayout('grid')" class="flex items-center px-2 sm:px-3 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white flex-1 sm:flex-none justify-center">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                            Grade
                        </button>
                        <button id="projects-list-view-btn" onclick="changeProjectsLayout('list')" class="flex items-center px-2 sm:px-3 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800 flex-1 sm:flex-none justify-center">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                            </svg>
                            Lista
                        </button>
                    </div>
                </div>
                
                <div id="projects-only-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4">
                    <!-- Projetos ser√£o inseridos aqui dinamicamente -->
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Sobre -->
        <section id="about" class="section-content hidden">
            <div class="max-w-[1700px] mx-auto px-3 sm:px-4 lg:px-8 text-center">
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-6 sm:mb-8">
                    Sobre <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Mim</span>
                </h2>
                <div class="gradient-border max-w-4xl mx-auto">
                    <div class="gradient-border-content p-4 sm:p-6 lg:p-8">
                        <p class="text-base sm:text-lg text-gray-600 mb-4 sm:mb-6 leading-relaxed">
                            Sou um desenvolvedor apaixonado por criar solu√ß√µes inovadoras e experi√™ncias digitais √∫nicas. 
                            Com experi√™ncia em diversas tecnologias, busco sempre entregar projetos de alta qualidade.
                        </p>
                        <p class="text-base sm:text-lg text-gray-600 leading-relaxed">
                            Minha miss√£o √© transformar ideias em realidade atrav√©s do c√≥digo, criando aplica√ß√µes que fazem a diferen√ßa na vida das pessoas.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Contato -->
        <section id="contact" class="section-content hidden">
            <div class="max-w-[1700px] mx-auto px-3 sm:px-4 lg:px-8">
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-center text-gray-800 mb-8 sm:mb-10 lg:mb-12">
                    Entre em <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Contato</span>
                </h2>
                <div class="max-w-2xl mx-auto">
                    <div class="gradient-border">
                        <div class="gradient-border-content p-4 sm:p-6 lg:p-8">
                            <form class="space-y-4 sm:space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome</label>
                                    <input type="text" required class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm sm:text-base">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                    <input type="email" required class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm sm:text-base">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem</label>
                                    <textarea rows="4" required class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm sm:text-base resize-none"></textarea>
                                </div>
                                <button type="submit" class="w-full bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2.5 sm:py-3 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-sm sm:text-base">
                                    Enviar Mensagem
                                </button>
                            </form>
                            <div class="mt-6 sm:mt-8 text-center">
                                <p class="text-gray-600 mb-4 text-sm sm:text-base">Ou me encontre nas redes sociais:</p>
                                <div class="flex justify-center space-x-4 sm:space-x-6">
                                    <a href="#" class="text-custom-purple hover:text-custom-blue transition-colors p-2">
                                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                                        </svg>
                                    </a>
                                    <a href="#" class="text-custom-purple hover:text-custom-blue transition-colors p-2">
                                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                        </svg>
                                    </a>
                                    <a href="#" class="text-custom-purple hover:text-custom-blue transition-colors p-2">
                                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal para Visualiza√ß√£o -->
    <div id="project-modal" class="modal">
        <div class="bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto m-2 sm:m-4 w-full sm:w-auto">
            <div class="p-3 sm:p-4 lg:p-6">
                <div class="flex justify-between items-center mb-3 sm:mb-4">
                    <h3 id="modal-title" class="text-lg sm:text-xl lg:text-2xl font-bold text-gray-800 pr-4 truncate"></h3>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 p-1 flex-shrink-0">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="modal-content" class="space-y-4 sm:space-y-6">
                    <!-- Conte√∫do do modal ser√° inserido aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Formul√°rio de Projeto -->
    <div id="project-form-modal" class="modal">
        <div class="bg-white rounded-lg max-w-md max-h-[90vh] overflow-y-auto m-2 sm:m-4 w-full sm:w-auto">
            <div class="p-3 sm:p-4 lg:p-6">
                <div class="flex justify-between items-center mb-3 sm:mb-4">
                    <h3 id="project-modal-title" class="text-lg sm:text-xl font-bold text-gray-800 pr-4">Adicionar Novo Projeto</h3>
                    <button onclick="closeProjectModal()" class="text-gray-500 hover:text-gray-700 p-1 flex-shrink-0">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <form id="project-form-modal-form" class="space-y-3 sm:space-y-4">
                    <input type="hidden" id="modal-project-id" value="">
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">T√≠tulo do Projeto</label>
                        <input type="text" id="modal-project-title" required class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">Descri√ß√£o Curta</label>
                        <textarea id="modal-project-description" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm resize-none"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">Link do Projeto</label>
                        <input type="url" id="modal-project-link" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">Imagens (m√∫ltiplas)</label>
                        <input type="file" id="modal-project-images" multiple accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                        <p class="text-xs text-gray-500 mt-1">M√∫ltiplas imagens para galeria</p>
                        <div id="current-images-preview" class="mt-2 hidden">
                            <p class="text-xs text-gray-600 mb-2">Imagens atuais:</p>
                            <div id="current-images-container" class="grid grid-cols-2 sm:grid-cols-3 gap-2"></div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">Data de Cria√ß√£o</label>
                        <input type="date" id="modal-project-date" value="" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">Progresso do Projeto</label>
                        <div class="space-y-3">
                            <div class="flex items-center gap-3">
                                <div class="flex-1 relative">
                                    <input type="range" id="modal-project-progress" min="0" max="100" value="0" class="w-full h-3 bg-gray-200 rounded-full appearance-none cursor-pointer slider" style="background: linear-gradient(to right, #8e44ad 0%, #02C2E9 var(--progress, 0%), #e5e7eb var(--progress, 0%), #e5e7eb 100%);">
                                    <div class="absolute -top-8 left-0 right-0 flex justify-between text-xs text-gray-500 pointer-events-none">
                                        <span>0%</span>
                                        <span>25%</span>
                                        <span>50%</span>
                                        <span>75%</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                                <div class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-3 py-1 rounded-full text-sm font-bold min-w-[4rem] text-center">
                                    <span id="modal-progress-value">0%</span>
                                </div>
                            </div>
                            <select id="modal-project-status" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                <option value="planning">üéØ Planejamento</option>
                                <option value="development">‚ö° Em Desenvolvimento</option>
                                <option value="testing">üß™ Em Testes</option>
                                <option value="completed">‚úÖ Conclu√≠do</option>
                                <option value="paused">‚è∏Ô∏è Pausado</option>
                                <option value="cancelled">‚ùå Cancelado</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">V√≠deo (YouTube/Vimeo)</label>
                        <input type="text" id="modal-project-video" placeholder="Link do YouTube/Vimeo" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm mb-2">
                        <input type="file" id="modal-project-video-file" accept="video/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                    </div>
                    
                    <button type="submit" id="project-submit-btn" class="w-full bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2.5 sm:py-3 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-sm sm:text-base">
                        Adicionar Projeto
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para Configura√ß√£o do Supabase -->
    <div id="supabase-config-modal" class="modal">
        <div class="bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto m-4 w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800">Configurar Backup Online (Supabase)</h3>
                    <button onclick="closeSupabaseConfig()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Abas -->
                <div class="flex border-b border-gray-200 mb-6">
                    <button id="tab-tutorial" onclick="switchTab('tutorial')" class="px-4 py-2 text-sm font-medium text-custom-blue border-b-2 border-custom-blue">
                        Tutorial Passo a Passo
                    </button>
                    <button id="tab-config" onclick="switchTab('config')" class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 ml-4">
                        Configura√ß√£o
                    </button>
                    <button id="tab-status" onclick="switchTab('status')" class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 ml-4">
                        Status
                    </button>
                </div>
                
                <!-- Conte√∫do da Aba Tutorial -->
                <div id="content-tutorial" class="tab-content">
                    <div class="space-y-6">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">O que √© o Supabase?</h4>
                            <p class="text-gray-600">O Supabase √© uma plataforma gratuita que permite salvar seus projetos na nuvem de forma segura. Assim voc√™ nunca perde seus dados!</p>
                        </div>
                        
                        <div class="space-y-4">
                            <h4 class="text-xl font-bold text-gray-800">Passo a Passo Completo:</h4>
                            
                            <div class="space-y-4">
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">1</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Criar conta no Supabase</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Acesse <a href="https://supabase.com" target="_blank" class="text-custom-blue hover:underline">supabase.com</a></li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Start your project"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Fa√ßa login com GitHub, Google ou email</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">2</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Criar novo projeto</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "New Project"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Escolha um nome (ex: "meu-portfolio")</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Crie uma senha forte para o banco</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Selecione uma regi√£o pr√≥xima</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Create new project"</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">3</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Obter as credenciais</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Aguarde o projeto ser criado (1-2 minutos)</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>V√° em "Settings" ‚Üí "API"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Copie a "URL" do projeto</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Copie a "anon public" key</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">4</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Criar tabela no banco</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>V√° em "Table Editor"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Create a new table"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Nome da tabela: <code class="bg-gray-100 px-1 rounded">projects_backup</code></li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Adicione as colunas conforme mostrado na aba "Configura√ß√£o"</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">5</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Configurar no sistema</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>V√° na aba "Configura√ß√£o" aqui</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Cole a URL e a chave que voc√™ copiou</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Testar Conex√£o"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Se tudo estiver certo, clique em "Salvar"</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">Pronto!</h4>
                            <p class="text-gray-600">Agora voc√™ pode fazer backup dos seus projetos na nuvem com seguran√ßa!</p>
                        </div>
                    </div>
                </div>
                
                <!-- Conte√∫do da Aba Configura√ß√£o -->
                <div id="content-config" class="tab-content hidden">
                    <div class="space-y-6">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">Importante</h4>
                            <p class="text-gray-600">Antes de configurar, certifique-se de ter seguido todos os passos do tutorial!</p>
                        </div>
                        
                        <form id="supabase-config-form" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    URL do Projeto Supabase
                                    <span class="text-red-500">*</span>
                                </label>
                                <input type="url" id="supabase-url" placeholder="https://seu-projeto.supabase.co" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                                <p class="text-xs text-gray-500 mt-1">Encontre em Settings ‚Üí API ‚Üí Project URL</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Chave P√∫blica (anon key)
                                    <span class="text-red-500">*</span>
                                </label>
                                <textarea id="supabase-key" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-blue focus:border-transparent"></textarea>
                                <p class="text-xs text-gray-500 mt-1">Encontre em Settings ‚Üí API ‚Üí Project API keys ‚Üí anon public</p>
                            </div>
                            
                            <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                                <h5 class="font-semibold text-gray-800 mb-2">üìã SQL para criar a tabela:</h5>
                                <div class="bg-gray-800 text-green-400 p-3 rounded text-sm overflow-x-auto" style="font-family: 'Courier New', monospace;">
                                    <pre>CREATE TABLE projects_backup (
  id SERIAL PRIMARY KEY,
  user_id TEXT NOT NULL,
  backup_date TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  backup_type TEXT DEFAULT 'manual',
  last_project TEXT,
  projects_count INTEGER NOT NULL,
  projects_data JSONB NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);</pre>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">Cole este c√≥digo no SQL Editor do Supabase</p>
                            </div>
                            
                            <div class="flex gap-3">
                                <button type="button" onclick="testSupabaseConnection()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                                    üîç Testar Conex√£o
                                </button>
                                <button type="submit" class="flex-1 bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2 px-4 rounded-lg hover:shadow-lg transition-all">
                                    üíæ Salvar Configura√ß√£o
                                </button>
                            </div>
                        </form>
                        
                        <div id="config-status" class="hidden">
                            <!-- Status ser√° mostrado aqui -->
                        </div>
                    </div>
                </div>
                
                <!-- Conte√∫do da Aba Status -->
                <div id="content-status" class="tab-content hidden">
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">Status da Conex√£o</h4>
                                <div id="connection-status" class="text-gray-600">
                                    <span class="inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"></span>
                                    N√£o configurado
                                </div>
                            </div>
                            
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">Projetos Locais</h4>
                                <div id="local-projects-count" class="text-2xl font-bold text-custom-purple">0</div>
                            </div>
                        </div>
                        
                        <div class="bg-white border border-gray-200 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-4">Hist√≥rico de Backups</h4>
                            <div id="backup-history" class="space-y-2">
                                <p class="text-gray-500 text-center py-4">Nenhum backup realizado ainda</p>
                            </div>
                        </div>
                        
                        <div class="bg-white border border-gray-200 rounded-lg p-4 mb-6">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-semibold text-gray-800">Backup Autom√°tico</h4>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="auto-backup-toggle" class="sr-only peer" onchange="toggleAutoBackup()">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-custom-purple peer-checked:to-custom-blue"></div>
                                </label>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Quando ativado, faz backup automaticamente ap√≥s cada altera√ß√£o nos projetos</p>
                            <div id="backup-status-indicator" class="text-xs text-gray-500">
                                <span class="inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"></span>
                                Backup autom√°tico desativado
                            </div>
                        </div>
                        
                        <div class="flex gap-3">
                            <button onclick="performBackup()" id="backup-btn" class="flex-1 bg-gradient-to-r from-custom-purple to-custom-blue text-white py-3 px-4 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                                Fazer Backup Agora
                            </button>
                            <button onclick="autoSyncProjects()" id="sync-btn" class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                                Sincronizar Agora
                            </button>
                            <button onclick="restoreFromBackup()" id="restore-btn" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                                Restaurar Espec√≠fico
                            </button>
                            <button onclick="loadBackupHistory()" class="px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                Atualizar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let projects = [];
        let currentSlides = {};
        let currentLayout = 'grid'; // 'grid' ou 'list'
        let projectsLayout = 'grid'; // Layout separado para a p√°gina de projetos
        let isFormOpen = false; // Estado do formul√°rio
        let editingProjectId = null; // Vari√°vel para controlar se estamos editando

        // Navega√ß√£o
        function showSection(sectionName) {
            // Esconder todas as se√ß√µes
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Mostrar se√ß√£o selecionada
            document.getElementById(sectionName).classList.remove('hidden');
            
            // Atualizar navega√ß√£o ativa
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Se for a se√ß√£o de projetos, renderizar apenas os projetos
            if (sectionName === 'projects') {
                renderProjects('projects-only-grid');
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Fun√ß√£o para abrir/fechar formul√°rio
        function toggleProjectForm() {
            const container = document.getElementById('project-form-container');
            const icon = document.getElementById('form-icon');
            const btnText = document.getElementById('form-btn-text');
            const sidebar = document.getElementById('form-sidebar');
            
            if (!isFormOpen) {
                // Abrir formul√°rio
                container.style.maxHeight = '800px';
                container.style.opacity = '1';
                icon.style.transform = 'rotate(45deg)';
                btnText.textContent = 'Close';
                
                // Expandir sidebar para mostrar formul√°rio
                sidebar.classList.remove('xl:w-0');
                sidebar.classList.add('xl:w-80');
                
                isFormOpen = true;
            } else {
                // Fechar formul√°rio
                container.style.maxHeight = '0';
                container.style.opacity = '0';
                icon.style.transform = 'rotate(0deg)';
                btnText.textContent = 'New';
                
                // Recolher sidebar
                sidebar.classList.remove('xl:w-80');
                sidebar.classList.add('xl:w-0');
                
                isFormOpen = false;
                
                // Limpar formul√°rio ao fechar
                document.getElementById('project-form').reset();
            }
        }

        // Fun√ß√£o para alterar layout da p√°gina principal
        function changeLayout(layout) {
            currentLayout = layout;
            
            // Atualizar bot√µes
            const gridBtn = document.getElementById('grid-view-btn');
            const listBtn = document.getElementById('list-view-btn');
            
            if (layout === 'grid') {
                gridBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                listBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            } else {
                listBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                gridBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            }
            
            // Re-renderizar projetos com novo layout
            renderProjects('projects-grid');
        }

        // Fun√ß√£o para alterar layout da p√°gina de projetos
        function changeProjectsLayout(layout) {
            projectsLayout = layout;
            
            // Atualizar bot√µes da p√°gina de projetos
            const gridBtn = document.getElementById('projects-grid-view-btn');
            const listBtn = document.getElementById('projects-list-view-btn');
            
            if (layout === 'grid') {
                gridBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                listBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            } else {
                listBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                gridBtn.className = 'flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            }
            
            // Re-renderizar projetos da p√°gina de projetos
            renderProjects('projects-only-grid');
        }

        // Fun√ß√£o para abrir modal do formul√°rio
        function openProjectModal() {
            editingProjectId = null;
            document.getElementById('project-modal-title').textContent = 'Adicionar Novo Projeto';
            document.getElementById('project-submit-btn').textContent = 'Adicionar Projeto';
            document.getElementById('modal-project-id').value = '';
            document.getElementById('current-images-preview').classList.add('hidden');
            document.getElementById('project-form-modal').classList.add('active');
        }

        function closeProjectModal() {
            document.getElementById('project-form-modal').classList.remove('active');
            document.getElementById('project-form-modal-form').reset();
            editingProjectId = null;
            document.getElementById('current-images-preview').classList.add('hidden');
        }

        // Fun√ß√£o para editar projeto
        function editProject(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            editingProjectId = projectId;
            
            // Atualizar t√≠tulo do modal
            document.getElementById('project-modal-title').textContent = 'Editar Projeto';
            document.getElementById('project-submit-btn').textContent = 'Salvar Altera√ß√µes';
            
            // Preencher campos com dados do projeto
            document.getElementById('modal-project-id').value = project.id;
            document.getElementById('modal-project-title').value = project.title;
            document.getElementById('modal-project-description').value = project.description;
            document.getElementById('modal-project-link').value = project.link || '';
            document.getElementById('modal-project-date').value = project.date || '';
            document.getElementById('modal-project-progress').value = project.progress || 0;
            document.getElementById('modal-project-status').value = project.status || 'planning';
            document.getElementById('modal-project-video').value = project.video || '';
            
            // Atualizar preview da barra de progresso
            updateProgressBar('modal-project-progress', 'modal-progress-value');
            
            // Mostrar imagens atuais
            if (project.images && project.images.length > 0) {
                const previewContainer = document.getElementById('current-images-container');
                previewContainer.innerHTML = '';
                
                project.images.forEach((img, index) => {
                    const imgElement = document.createElement('div');
                    imgElement.className = 'relative';
                    imgElement.innerHTML = `
                        <img src="${img}" alt="Imagem ${index + 1}" class="w-full h-16 object-cover rounded border">
                        <button type="button" onclick="removeCurrentImage(${index})" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs hover:bg-red-600">
                            √ó
                        </button>
                    `;
                    previewContainer.appendChild(imgElement);
                });
                
                document.getElementById('current-images-preview').classList.remove('hidden');
            }
            
            // Abrir modal
            document.getElementById('project-form-modal').classList.add('active');
        }

        // Fun√ß√£o para remover imagem atual durante edi√ß√£o
        function removeCurrentImage(imageIndex) {
            if (!editingProjectId) return;
            
            const project = projects.find(p => p.id === editingProjectId);
            if (!project) return;
            
            if (confirm('Tem certeza que deseja remover esta imagem?')) {
                project.images.splice(imageIndex, 1);
                
                // Atualizar preview
                const previewContainer = document.getElementById('current-images-container');
                previewContainer.innerHTML = '';
                
                project.images.forEach((img, index) => {
                    const imgElement = document.createElement('div');
                    imgElement.className = 'relative';
                    imgElement.innerHTML = `
                        <img src="${img}" alt="Imagem ${index + 1}" class="w-full h-16 object-cover rounded border">
                        <button type="button" onclick="removeCurrentImage(${index})" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs hover:bg-red-600">
                            √ó
                        </button>
                    `;
                    previewContainer.appendChild(imgElement);
                });
                
                // Se n√£o h√° mais imagens, esconder preview
                if (project.images.length === 0) {
                    document.getElementById('current-images-preview').classList.add('hidden');
                }
            }
        }

        // Formul√°rio de cadastro (sidebar)
        document.getElementById('project-form').addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Formul√°rio sidebar enviado');
            handleProjectSubmission('project-form');
        });

        // Formul√°rio de cadastro (modal)
        document.getElementById('project-form-modal-form').addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Formul√°rio modal enviado');
            handleProjectSubmission('project-form-modal-form');
        });

        function handleProjectSubmission(formId) {
            console.log('üöÄ Iniciando cria√ß√£o/edi√ß√£o de projeto com formId:', formId);
            
            const isModal = formId === 'project-form-modal-form';
            const prefix = isModal ? 'modal-' : '';
            
            try {
                // Capturar dados do formul√°rio
                const titleElement = document.getElementById(prefix + 'project-title');
                const descriptionElement = document.getElementById(prefix + 'project-description');
                const linkElement = document.getElementById(prefix + 'project-link');
                const dateElement = document.getElementById(prefix + 'project-date');
                const progressElement = document.getElementById(prefix + 'project-progress');
                const statusElement = document.getElementById(prefix + 'project-status');
                const imagesElement = document.getElementById(prefix + 'project-images');
                const videoElement = document.getElementById(prefix + 'project-video');
                const videoFileElement = document.getElementById(prefix + 'project-video-file');
                
                if (!titleElement || !descriptionElement) {
                    console.error('‚ùå Elementos do formul√°rio n√£o encontrados');
                    alert('Erro interno: elementos do formul√°rio n√£o encontrados');
                    return;
                }
                
                const title = titleElement.value?.trim();
                const description = descriptionElement.value?.trim();
                const link = linkElement?.value?.trim() || '';
                const date = dateElement?.value || new Date().toISOString().split('T')[0];
                const progress = parseInt(progressElement?.value || 0);
                const status = statusElement?.value || 'planning';
                const images = imagesElement?.files || [];
                const videoLink = videoElement?.value?.trim() || '';
                const videoFile = videoFileElement?.files?.[0] || null;
                
                console.log('üìã Dados capturados:', { 
                    title, 
                    description, 
                    link, 
                    date,
                    progress,
                    status,
                    imagesCount: images?.length || 0,
                    hasVideoLink: !!videoLink,
                    hasVideoFile: !!videoFile
                });
                
                // Valida√ß√£o obrigat√≥ria
                if (!title || !description) {
                    alert('‚ùå Por favor, preencha pelo menos o t√≠tulo e a descri√ß√£o do projeto.');
                    return;
                }
                
                // Verificar se estamos editando
                if (editingProjectId) {
                    console.log('‚úèÔ∏è Modo edi√ß√£o - ID:', editingProjectId);
                    handleProjectEdit(title, description, link, date, progress, status, images, videoLink, videoFile, isModal);
                } else {
                    console.log('‚ûï Modo cria√ß√£o de novo projeto');
                    handleProjectCreation(title, description, link, date, progress, status, images, videoLink, videoFile, isModal);
                }
            } catch (error) {
                console.error('‚ùå Erro ao processar formul√°rio:', error);
                alert('Erro ao processar dados do formul√°rio. Tente novamente.');
            }
        }

        function handleProjectCreation(title, description, link, date, progress, status, images, videoLink, videoFile, isModal) {
            console.log('üî® Criando novo projeto...');
            
            try {
                // Criar objeto do projeto com ID √∫nico
                const projectId = Date.now() + Math.floor(Math.random() * 1000);
                const project = {
                    id: projectId,
                    title: title,
                    description: description,
                    link: link || '',
                    date: date,
                    progress: progress || 0,
                    status: status || 'planning',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString(),
                    images: [],
                    video: videoLink || '',
                    videoFile: null,
                    priority: 'normal',
                    category: 'geral',
                    tags: []
                };
                
                console.log('üì¶ Projeto criado com ID:', projectId, project);
                
                // Processar imagens se houver
                if (images && images.length > 0) {
                    console.log('üñºÔ∏è Processando', images.length, 'imagens...');
                    processProjectImages(project, images, videoFile, isModal, true);
                } else {
                    console.log('üñºÔ∏è Nenhuma imagem fornecida, usando imagem padr√£o');
                    // Adicionar imagem padr√£o
                    project.images.push(createDefaultImage());
                    finalizeProjectSave(project, videoFile, isModal, true);
                }
            } catch (error) {
                console.error('‚ùå Erro na cria√ß√£o do projeto:', error);
                alert('Erro ao criar projeto. Tente novamente.');
            }
        }

        function handleProjectEdit(title, description, link, date, progress, status, images, videoLink, videoFile, isModal) {
            console.log('‚úèÔ∏è Editando projeto existente...');
            
            try {
                const existingProject = projects.find(p => p.id === editingProjectId);
                if (!existingProject) {
                    console.error('‚ùå Projeto n√£o encontrado para edi√ß√£o');
                    alert('Projeto n√£o encontrado para edi√ß√£o.');
                    return;
                }
                
                // Atualizar dados b√°sicos
                existingProject.title = title;
                existingProject.description = description;
                existingProject.link = link || '';
                existingProject.date = date;
                existingProject.progress = progress || 0;
                existingProject.status = status || 'planning';
                existingProject.video = videoLink || '';
                existingProject.updatedAt = new Date().toISOString();
                
                console.log('üìù Dados b√°sicos atualizados:', existingProject);
                
                // Processar novas imagens se houver
                if (images && images.length > 0) {
                    console.log('üñºÔ∏è Processando', images.length, 'novas imagens...');
                    processProjectImages(existingProject, images, videoFile, isModal, false);
                } else {
                    console.log('üìù Sem novas imagens, finalizando edi√ß√£o');
                    finalizeProjectSave(existingProject, videoFile, isModal, false);
                }
            } catch (error) {
                console.error('‚ùå Erro na edi√ß√£o do projeto:', error);
                alert('Erro ao editar projeto. Tente novamente.');
            }
        }

        function processProjectImages(project, images, videoFile, isModal, isNewProject) {
            try {
                let processedCount = 0;
                const totalImages = images.length;
                const newImages = [];
                
                console.log('üîÑ Iniciando processamento de', totalImages, 'imagens');
                
                if (totalImages === 0) {
                    console.log('üìù Nenhuma imagem para processar');
                    finalizeProjectSave(project, videoFile, isModal, isNewProject);
                    return;
                }
                
                Array.from(images).forEach((file, index) => {
                    if (!file || !file.type.startsWith('image/')) {
                        console.warn(`‚ö†Ô∏è Arquivo ${index + 1} n√£o √© uma imagem v√°lida`);
                        processedCount++;
                        if (processedCount === totalImages) {
                            finalizeImageProcessing();
                        }
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            newImages.push(e.target.result);
                            processedCount++;
                            
                            console.log(`‚úÖ Imagem ${processedCount}/${totalImages} processada`);
                            
                            if (processedCount === totalImages) {
                                finalizeImageProcessing();
                            }
                        } catch (error) {
                            console.error('‚ùå Erro ao processar resultado da imagem:', error);
                            processedCount++;
                            if (processedCount === totalImages) {
                                finalizeImageProcessing();
                            }
                        }
                    };
                    reader.onerror = function(error) {
                        console.error('‚ùå Erro ao ler arquivo de imagem:', error);
                        processedCount++;
                        if (processedCount === totalImages) {
                            finalizeImageProcessing();
                        }
                    };
                    reader.readAsDataURL(file);
                });
                
                function finalizeImageProcessing() {
                    console.log('üéâ Processamento de imagens finalizado!');
                    
                    if (isNewProject) {
                        project.images = newImages.length > 0 ? newImages : [createDefaultImage()];
                    } else {
                        // Para edi√ß√£o, adicionar √†s imagens existentes
                        if (newImages.length > 0) {
                            project.images = project.images.concat(newImages);
                        }
                    }
                    
                    finalizeProjectSave(project, videoFile, isModal, isNewProject);
                }
                
            } catch (error) {
                console.error('‚ùå Erro no processamento de imagens:', error);
                // Em caso de erro, usar imagem padr√£o para novos projetos
                if (isNewProject && (!project.images || project.images.length === 0)) {
                    project.images = [createDefaultImage()];
                }
                finalizeProjectSave(project, videoFile, isModal, isNewProject);
            }
        }

        function finalizeProjectSave(project, videoFile, isModal, isNewProject) {
            console.log('üèÅ Finalizando salvamento do projeto...');
            
            // Processar v√≠deo se houver
            if (videoFile) {
                console.log('üé• Processando arquivo de v√≠deo...');
                const reader = new FileReader();
                reader.onload = function(e) {
                    project.videoFile = e.target.result;
                    console.log('‚úÖ V√≠deo processado');
                    completeProjectSave(project, isModal, isNewProject);
                };
                reader.onerror = function(error) {
                    console.error('‚ùå Erro ao processar v√≠deo:', error);
                    completeProjectSave(project, isModal, isNewProject);
                };
                reader.readAsDataURL(videoFile);
            } else {
                console.log('üìù Sem v√≠deo para processar');
                completeProjectSave(project, isModal, isNewProject);
            }
        }

        function completeProjectSave(project, isModal, isNewProject) {
            console.log('üíæ Completando salvamento...');
            
            try {
                // Validar dados do projeto antes de salvar
                if (!project || !project.title || !project.description) {
                    console.error('‚ùå Dados do projeto inv√°lidos:', project);
                    alert('Erro: dados do projeto inv√°lidos.');
                    return;
                }
                
                if (isNewProject) {
                    // Verificar se o projeto j√° existe (evitar duplicatas)
                    const existingProject = projects.find(p => p.id === project.id);
                    if (existingProject) {
                        console.warn('‚ö†Ô∏è Projeto j√° existe, atualizando ao inv√©s de criar');
                        Object.assign(existingProject, project);
                    } else {
                        // Adicionar novo projeto ao array
                        projects.push(project);
                        console.log('‚ûï Projeto adicionado ao array. Total:', projects.length);
                    }
                } else {
                    console.log('‚úèÔ∏è Projeto editado no array');
                }
                
                // Salvar no localStorage
                const saveSuccess = saveToLocalStorage();
                if (!saveSuccess) {
                    console.error('‚ùå Falha ao salvar no localStorage');
                    alert('Erro ao salvar dados localmente.');
                    return;
                }
                
                console.log('üíæ Dados salvos no localStorage com sucesso');
                
                // Fazer backup autom√°tico
                if (autoBackupEnabled && supabaseConfig.url && supabaseConfig.key) {
                    const backupAction = isNewProject ? 'criacao' : 'edicao';
                    performAutoBackup(backupAction, project.title);
                }
                
                // Re-renderizar projetos em ambos os grids
                renderProjects('projects-grid');
                renderProjects('projects-only-grid');
                console.log('üîÑ Grids atualizados');
                
                // Limpar e fechar formul√°rio
                if (isModal) {
                    document.getElementById('project-form-modal-form').reset();
                    updateProgressBar('modal-project-progress', 'modal-progress-value');
                    closeProjectModal();
                } else {
                    document.getElementById('project-form').reset();
                    updateProgressBar('project-progress', 'progress-value');
                    toggleProjectForm();
                }
                console.log('üìã Formul√°rio limpo e fechado');
                
                // Limpar vari√°vel de edi√ß√£o
                editingProjectId = null;
                
                // Mostrar mensagem de sucesso
                const action = isNewProject ? 'criado' : 'atualizado';
                alert(`‚úÖ Projeto "${project.title}" ${action} com sucesso!`);
                
                console.log('üéâ Processo conclu√≠do com sucesso!');
                console.log('üìä Estado atual:', {
                    totalProjects: projects.length,
                    lastProject: projects[projects.length - 1]?.title,
                    projectData: project
                });
                
            } catch (error) {
                console.error('‚ùå Erro durante o salvamento:', error);
                alert('‚ùå Erro ao salvar o projeto. Tente novamente.');
            }
        }

        function createDefaultImage() {
            return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgMTIwSDIyNVYxODBIMTc1VjEyMFoiIGZpbGw9IiM5Q0EzQUYiLz4KPHBhdGggZD0iTTE1MCAyMTBIMjUwVjI0MEgxNTBWMjEwWiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K';
        }



        function renderProjects(containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // Atualizar classes do container baseado no layout
            if (containerId === 'projects-grid') {
                if (currentLayout === 'grid') {
                    container.className = 'grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4';
                } else {
                    container.className = 'space-y-3';
                }
            } else if (containerId === 'projects-only-grid') {
                if (projectsLayout === 'grid') {
                    container.className = 'grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4';
                } else {
                    container.className = 'space-y-3';
                }
            }
            
            projects.forEach(project => {
                const projectCard = createProjectCard(project, containerId);
                container.appendChild(projectCard);
            });
        }

        function createProjectCard(project, containerId = 'projects-grid') {
            const card = document.createElement('div');
            const isListView = (currentLayout === 'list' && containerId === 'projects-grid') || 
                              (projectsLayout === 'list' && containerId === 'projects-only-grid');
            
            // Fun√ß√£o para resumir descri√ß√£o
            const getShortDescription = (description) => {
                return description.length > 60 ? description.substring(0, 60) + '...' : description;
            };
            
            if (isListView) {
                // Layout de Lista - Reduzido
                card.className = 'gradient-border transform hover:scale-[1.02] transition-all duration-300 hover:shadow-xl';
                
                card.innerHTML = `
                    <div class="gradient-border-content p-3">
                        <div class="flex flex-col md:flex-row gap-3">
                            <!-- Imagem menor -->
                            <div class="slide-container w-full md:w-20 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                ${project.images.map((img, index) => `
                                    <div class="slide ${index === 0 ? 'active' : ''} h-full">
                                        <img src="${img}" alt="${project.title}" class="w-full h-full object-cover">
                                    </div>
                                `).join('')}
                            </div>
                            
                            <!-- Conte√∫do compacto -->
                            <div class="flex-1 flex flex-col justify-between min-h-[3rem]">
                                <div>
                                    <h3 class="text-sm font-bold text-gray-800 mb-1">${project.title}</h3>
                                    <p class="text-gray-600 text-xs leading-relaxed line-clamp-1 mb-1">${getShortDescription(project.description)}</p>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs text-gray-500">${getStatusEmoji(project.status || 'planning')}</span>
                                        <div class="flex-1 bg-gray-200 rounded-full h-1">
                                            <div class="bg-gradient-to-r from-custom-purple to-custom-blue h-1 rounded-full transition-all duration-300" style="width: ${project.progress || 0}%"></div>
                                        </div>
                                        <span class="text-xs font-medium text-gray-600">${project.progress || 0}%</span>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between mt-2">
                                    <button onclick="openModal(${project.id})" class="text-custom-purple hover:text-custom-blue font-medium text-xs">
                                        Ver ‚Üí
                                    </button>
                                    <div class="flex items-center gap-1">
                                        ${project.link ? `
                                            <a href="${project.link}" target="_blank" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-2 py-1 rounded-full hover:shadow-lg transition-all duration-300 font-medium text-xs">
                                                Abrir
                                            </a>
                                        ` : ''}
                                        <button onclick="editProject(${project.id})" class="text-gray-400 hover:text-custom-blue p-1 transition-all duration-300 flex-shrink-0" title="Editar projeto">
                                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                            </svg>
                                        </button>
                                        <button onclick="deleteProject(${project.id})" class="text-gray-400 hover:text-red-500 p-1 transition-all duration-300 flex-shrink-0" title="Excluir projeto">
                                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Layout de Grade - Reduzido pela metade
                if (containerId === 'projects-grid') {
                    // Cards menores apenas no dashboard
                    card.className = 'gradient-border transform hover:scale-105 transition-all duration-300 hover:shadow-xl';
                    
                    card.innerHTML = `
                        <div class="gradient-border-content p-3 h-full flex flex-col">
                            <div class="slide-container mb-3 h-24 bg-gray-100 rounded-lg overflow-hidden">
                                ${project.images.map((img, index) => `
                                    <div class="slide ${index === 0 ? 'active' : ''} h-full">
                                        <img src="${img}" alt="${project.title}" class="w-full h-full object-cover">
                                    </div>
                                `).join('')}
                                ${project.images.length > 1 ? `
                                    <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                        ${project.images.map((_, index) => `
                                            <button onclick="changeSlide(${project.id}, ${index})" class="w-1 h-1 rounded-full bg-white opacity-50 hover:opacity-100 transition-opacity"></button>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <h3 class="text-sm font-bold text-gray-800 mb-1">${project.title}</h3>
                            <p class="text-gray-600 text-xs mb-2 flex-grow line-clamp-2">${getShortDescription(project.description)}</p>
                            
                            <!-- Barra de Progresso -->
                            <div class="mb-2">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="text-xs text-gray-500">${getStatusEmoji(project.status || 'planning')} ${getStatusText(project.status || 'planning')}</span>
                                    <span class="text-xs font-medium text-gray-700">${project.progress || 0}%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5">
                                    <div class="bg-gradient-to-r from-custom-purple to-custom-blue h-1.5 rounded-full transition-all duration-300" style="width: ${project.progress || 0}%"></div>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <button onclick="openModal(${project.id})" class="text-custom-purple hover:text-custom-blue font-medium text-xs">
                                    Ver ‚Üí
                                </button>
                                <div class="flex items-center gap-1">
                                    ${project.link ? `
                                        <a href="${project.link}" target="_blank" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-2 py-1 rounded-full hover:shadow-lg transition-all duration-300 text-xs">
                                            Abrir
                                        </a>
                                    ` : ''}
                                    <button onclick="editProject(${project.id})" class="text-gray-400 hover:text-custom-blue p-1 transition-all duration-300 flex-shrink-0" title="Editar projeto">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                    </button>
                                    <button onclick="deleteProject(${project.id})" class="text-gray-400 hover:text-red-500 p-1 transition-all duration-300 flex-shrink-0" title="Excluir projeto">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // Cards reduzidos pela metade na p√°gina de projetos
                    card.className = 'gradient-border transform hover:scale-105 transition-all duration-300 hover:shadow-xl';
                    
                    card.innerHTML = `
                        <div class="gradient-border-content p-4 h-full flex flex-col">
                            <div class="slide-container mb-3 h-36 bg-gray-100 rounded-lg overflow-hidden">
                                ${project.images.map((img, index) => `
                                    <div class="slide ${index === 0 ? 'active' : ''} h-full">
                                        <img src="${img}" alt="${project.title}" class="w-full h-full object-cover">
                                    </div>
                                `).join('')}
                                ${project.images.length > 1 ? `
                                    <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                        ${project.images.map((_, index) => `
                                            <button onclick="changeSlide(${project.id}, ${index})" class="w-1.5 h-1.5 rounded-full bg-white opacity-50 hover:opacity-100 transition-opacity"></button>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <h3 class="text-lg font-bold text-gray-800 mb-2">${project.title}</h3>
                            <p class="text-gray-600 text-sm mb-3 flex-grow line-clamp-2">${getShortDescription(project.description)}</p>
                            
                            <!-- Barra de Progresso -->
                            <div class="mb-3">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="text-sm text-gray-600">${getStatusEmoji(project.status || 'planning')} ${getStatusText(project.status || 'planning')}</span>
                                    <span class="text-sm font-medium text-gray-700">${project.progress || 0}%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-custom-purple to-custom-blue h-2 rounded-full transition-all duration-300" style="width: ${project.progress || 0}%"></div>
                                </div>
                            </div>
                            
                            ${project.date ? `<p class="text-xs text-gray-500 mb-2">üìÖ ${formatDate(project.date)}</p>` : ''}
                            
                            <div class="flex items-center justify-between gap-2">
                                <button onclick="openModal(${project.id})" class="text-custom-purple hover:text-custom-blue font-medium text-xs">
                                    Ver ‚Üí
                                </button>
                                <div class="flex items-center gap-1">
                                    ${project.link ? `
                                        <a href="${project.link}" target="_blank" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-3 py-1.5 rounded-full hover:shadow-lg transition-all duration-300 text-xs">
                                            Abrir
                                        </a>
                                    ` : ''}
                                    <button onclick="editProject(${project.id})" class="text-gray-400 hover:text-custom-blue p-1 transition-all duration-300 flex-shrink-0" title="Editar projeto">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                    </button>
                                    <button onclick="deleteProject(${project.id})" class="text-gray-400 hover:text-red-500 p-1 transition-all duration-300 flex-shrink-0" title="Excluir projeto">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            
            // Inicializar slide atual
            currentSlides[project.id] = 0;
            
            // Auto-play para slides
            if (project.images.length > 1) {
                setInterval(() => {
                    const nextSlide = (currentSlides[project.id] + 1) % project.images.length;
                    changeSlide(project.id, nextSlide);
                }, 5000);
            }
            
            return card;
        }

        function changeSlide(projectId, slideIndex) {
            currentSlides[projectId] = slideIndex;
            
            const projectCard = document.querySelector(`[data-project-id="${projectId}"]`) || 
                               Array.from(document.querySelectorAll('.slide-container')).find(container => {
                                   return container.querySelector('.slide img')?.alt === projects.find(p => p.id === projectId)?.title;
                               });
            
            if (projectCard) {
                const slides = projectCard.querySelectorAll('.slide');
                slides.forEach((slide, index) => {
                    slide.classList.toggle('active', index === slideIndex);
                });
                
                const dots = projectCard.querySelectorAll('button');
                dots.forEach((dot, index) => {
                    dot.classList.toggle('opacity-100', index === slideIndex);
                    dot.classList.toggle('opacity-50', index !== slideIndex);
                });
            }
        }

        function openModal(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            const modal = document.getElementById('project-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            
            modalTitle.textContent = project.title;
            
            modalContent.innerHTML = `
                <div class="space-y-6">
                    <p class="text-gray-600 text-lg">${project.description}</p>
                    
                    <!-- Informa√ß√µes do Projeto -->
                    <div class="bg-gray-50 rounded-lg p-4 space-y-3">
                        <h4 class="text-lg font-semibold text-gray-800">Informa√ß√µes do Projeto</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${project.date ? `
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-custom-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <div>
                                        <span class="text-sm text-gray-500">Data de Cria√ß√£o:</span>
                                        <p class="font-medium text-gray-800">${formatDate(project.date)}</p>
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${project.link ? `
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-custom-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                    </svg>
                                    <div>
                                        <span class="text-sm text-gray-500">Link do Projeto:</span>
                                        <p class="font-medium">
                                            <a href="${project.link}" target="_blank" class="text-custom-blue hover:text-custom-purple transition-colors underline">
                                                ${project.link.length > 40 ? project.link.substring(0, 40) + '...' : project.link}
                                            </a>
                                        </p>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-custom-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <div>
                                    <span class="text-sm text-gray-500">Status:</span>
                                    <p class="font-medium text-gray-800">${getStatusEmoji(project.status || 'planning')} ${getStatusText(project.status || 'planning')}</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <div>
                                    <span class="text-sm text-gray-500">Imagens:</span>
                                    <p class="font-medium text-gray-800">${project.images.length} ${project.images.length === 1 ? 'imagem' : 'imagens'}</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-custom-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                                <div>
                                    <span class="text-sm text-gray-500">Progresso:</span>
                                    <div class="flex items-center gap-2">
                                        <div class="w-20 bg-gray-200 rounded-full h-2">
                                            <div class="bg-gradient-to-r from-custom-purple to-custom-blue h-2 rounded-full" style="width: ${project.progress || 0}%"></div>
                                        </div>
                                        <span class="font-medium text-gray-800">${project.progress || 0}%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <div>
                                    <span class="text-sm text-gray-500">Cadastrado em:</span>
                                    <p class="font-medium text-gray-800">${project.createdAt ? new Date(project.createdAt).toLocaleDateString('pt-BR') : 'Data n√£o dispon√≠vel'}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    ${project.images.length > 0 ? `
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-800">Galeria de Imagens</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${project.images.map(img => `
                                    <img src="${img}" alt="${project.title}" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity" onclick="viewFullImage('${img}')">
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    ${project.video || project.videoFile ? `
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-800">V√≠deo de Apresenta√ß√£o</h4>
                            ${project.video ? `
                                <div class="aspect-video">
                                    ${project.video.includes('youtube.com') || project.video.includes('youtu.be') ? `
                                        <iframe src="${getYouTubeEmbedUrl(project.video)}" class="w-full h-full rounded-lg" frameborder="0" allowfullscreen></iframe>
                                    ` : project.video.includes('vimeo.com') ? `
                                        <iframe src="${getVimeoEmbedUrl(project.video)}" class="w-full h-full rounded-lg" frameborder="0" allowfullscreen></iframe>
                                    ` : `
                                        <video controls class="w-full h-full rounded-lg">
                                            <source src="${project.video}" type="video/mp4">
                                            Seu navegador n√£o suporta o elemento de v√≠deo.
                                        </video>
                                    `}
                                </div>
                            ` : project.videoFile ? `
                                <div class="aspect-video">
                                    <video controls class="w-full h-full rounded-lg">
                                        <source src="${project.videoFile}" type="video/mp4">
                                        Seu navegador n√£o suporta o elemento de v√≠deo.
                                    </video>
                                </div>
                            ` : ''}
                        </div>
                    ` : ''}
                    
                    ${project.link ? `
                        <div class="text-center">
                            <a href="${project.link}" target="_blank" class="inline-block bg-gradient-to-r from-custom-purple to-custom-blue text-white px-8 py-3 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                                Acessar Projeto Completo
                            </a>
                        </div>
                    ` : ''}
                </div>
            `;
            
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('project-modal').classList.remove('active');
        }

        function viewFullImage(imageSrc) {
            const fullImageModal = document.createElement('div');
            fullImageModal.className = 'modal active';
            fullImageModal.innerHTML = `
                <div class="max-w-full max-h-full p-4">
                    <img src="${imageSrc}" alt="Imagem ampliada" class="max-w-full max-h-full object-contain rounded-lg">
                    <button onclick="this.parentElement.parentElement.remove()" class="absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `;
            document.body.appendChild(fullImageModal);
        }

        function getYouTubeEmbedUrl(url) {
            const videoId = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);
            return videoId ? `https://www.youtube.com/embed/${videoId[1]}` : url;
        }

        function getVimeoEmbedUrl(url) {
            const videoId = url.match(/vimeo\.com\/(\d+)/);
            return videoId ? `https://player.vimeo.com/video/${videoId[1]}` : url;
        }

        function deleteProject(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            if (confirm(`Tem certeza que deseja excluir o projeto "${project.title}"?`)) {
                const projectTitle = project.title;
                
                // Remover projeto do array
                projects = projects.filter(p => p.id !== projectId);
                
                // Salvar no localStorage
                saveToLocalStorage();
                
                // Fazer backup autom√°tico
                if (autoBackupEnabled) {
                    performAutoBackup('exclusao', projectTitle);
                }
                
                // Atualizar ambos os grids
                renderProjects('projects-grid');
                renderProjects('projects-only-grid');
                
                // Mostrar mensagem de sucesso
                alert('Projeto exclu√≠do com sucesso!');
            }
        }

        // Fechar modal ao clicar fora
        document.getElementById('project-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Fechar modal do formul√°rio ao clicar fora
        document.getElementById('project-form-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProjectModal();
            }
        });

        // Fun√ß√£o para formatar data
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        // Configura√ß√£o do Supabase
        let supabaseConfig = {
            url: localStorage.getItem('supabase_url') || '',
            key: localStorage.getItem('supabase_key') || ''
        };

        // Sistema de Backup Autom√°tico
        let autoBackupEnabled = localStorage.getItem('auto_backup_enabled') === 'true';
        let backupQueue = [];
        let isBackingUp = false;

        // Fun√ß√µes do Modal de Configura√ß√£o do Supabase
        function openSupabaseConfig() {
            document.getElementById('supabase-config-modal').classList.add('active');
            loadSupabaseConfig();
            updateConnectionStatus();
            updateLocalProjectsCount();
        }

        function closeSupabaseConfig() {
            document.getElementById('supabase-config-modal').classList.remove('active');
        }

        function switchTab(tabName) {
            // Remover classe ativa de todas as abas
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.className = 'px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 ml-4';
            });
            
            // Ativar aba selecionada
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            document.getElementById(`tab-${tabName}`).className = 'px-4 py-2 text-sm font-medium text-custom-blue border-b-2 border-custom-blue ml-4';
            
            // Primeira aba n√£o tem margin-left
            if (tabName === 'tutorial') {
                document.getElementById(`tab-${tabName}`).className = 'px-4 py-2 text-sm font-medium text-custom-blue border-b-2 border-custom-blue';
            }
        }

        function loadSupabaseConfig() {
            document.getElementById('supabase-url').value = supabaseConfig.url;
            document.getElementById('supabase-key').value = supabaseConfig.key;
        }

        function updateConnectionStatus() {
            const statusElement = document.getElementById('connection-status');
            
            if (!supabaseConfig.url || !supabaseConfig.key) {
                statusElement.innerHTML = '<span class="inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"></span>N√£o configurado';
                return;
            }
            
            statusElement.innerHTML = '<span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>Configurado';
        }

        function updateLocalProjectsCount() {
            document.getElementById('local-projects-count').textContent = projects.length;
        }

        async function testSupabaseConnection() {
            const url = document.getElementById('supabase-url').value.trim();
            const key = document.getElementById('supabase-key').value.trim();
            
            if (!url || !key) {
                showConfigStatus('Preencha todos os campos obrigat√≥rios!', 'error');
                return;
            }
            
            showConfigStatus('Testando conex√£o...', 'info');
            
            try {
                const response = await fetch(`${url}/rest/v1/projects_backup?limit=1`, {
                    method: 'GET',
                    headers: {
                        'apikey': key,
                        'Authorization': `Bearer ${key}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    showConfigStatus('Conex√£o testada com sucesso!', 'success');
                } else if (response.status === 404) {
                    showConfigStatus('Tabela "projects_backup" n√£o encontrada. Execute o SQL fornecido no Supabase.', 'warning');
                } else {
                    throw new Error(`Erro ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('Erro no teste de conex√£o:', error);
                showConfigStatus('Erro na conex√£o. Verifique as credenciais e tente novamente.', 'error');
            }
        }

        function showConfigStatus(message, type) {
            const statusElement = document.getElementById('config-status');
            const colors = {
                success: 'border border-gray-200 text-gray-800',
                error: 'border border-gray-200 text-gray-800',
                warning: 'border border-gray-200 text-gray-800',
                info: 'border border-gray-200 text-gray-800'
            };
            
            statusElement.className = `rounded-lg p-4 ${colors[type]}`;
            statusElement.textContent = message;
            statusElement.classList.remove('hidden');
            
            // Auto-hide ap√≥s 5 segundos para mensagens de sucesso
            if (type === 'success') {
                setTimeout(() => {
                    statusElement.classList.add('hidden');
                }, 5000);
            }
        }

        // Formul√°rio de configura√ß√£o do Supabase
        document.getElementById('supabase-config-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const url = document.getElementById('supabase-url').value.trim();
            const key = document.getElementById('supabase-key').value.trim();
            
            if (!url || !key) {
                showConfigStatus('Preencha todos os campos obrigat√≥rios!', 'error');
                return;
            }
            
            // Salvar configura√ß√£o
            supabaseConfig.url = url;
            supabaseConfig.key = key;
            
            localStorage.setItem('supabase_url', url);
            localStorage.setItem('supabase_key', key);
            
            showConfigStatus('Configura√ß√£o salva com sucesso!', 'success');
            updateConnectionStatus();
        });

        // Fun√ß√£o de backup autom√°tico
        async function performAutoBackup(action = 'manual', projectTitle = '') {
            if (!supabaseConfig.url || !supabaseConfig.key || !autoBackupEnabled) {
                return false;
            }
            
            if (projects.length === 0) {
                return false;
            }
            
            // Evitar m√∫ltiplos backups simult√¢neos
            if (isBackingUp) {
                backupQueue.push({ action, projectTitle });
                return false;
            }
            
            isBackingUp = true;
            
            try {
                // Preparar dados para backup
                const backupData = {
                    user_id: 'portfolio_user_auto',
                    backup_date: new Date().toISOString(),
                    backup_type: action,
                    last_project: projectTitle,
                    projects_count: projects.length,
                    projects_data: projects.map(project => ({
                        id: project.id,
                        title: project.title,
                        description: project.description,
                        link: project.link || '',
                        date: project.date,
                        progress: project.progress || 0,
                        status: project.status || 'planning',
                        createdAt: project.createdAt,
                        updatedAt: project.updatedAt,
                        video: project.video || '',
                        priority: project.priority || 'normal',
                        category: project.category || 'geral',
                        tags: project.tags || [],
                        images_count: project.images ? project.images.length : 0,
                        has_video_file: project.videoFile ? true : false
                    }))
                };
                
                const response = await fetch(`${supabaseConfig.url}/rest/v1/projects_backup`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'apikey': supabaseConfig.key,
                        'Authorization': `Bearer ${supabaseConfig.key}`
                    },
                    body: JSON.stringify(backupData)
                });
                
                if (response.ok) {
                    console.log(`‚úÖ Backup autom√°tico realizado: ${action} - ${projectTitle}`);
                    updateBackupStatus('success', action);
                    
                    // Processar pr√≥ximo item da fila
                    if (backupQueue.length > 0) {
                        const nextBackup = backupQueue.shift();
                        setTimeout(() => performAutoBackup(nextBackup.action, nextBackup.projectTitle), 1000);
                    }
                    
                    return true;
                } else {
                    throw new Error(`Erro ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('‚ùå Erro no backup autom√°tico:', error);
                updateBackupStatus('error', action);
                return false;
            } finally {
                isBackingUp = false;
            }
        }

        async function performBackup() {
            if (!supabaseConfig.url || !supabaseConfig.key) {
                alert('Configure o Supabase primeiro na aba "Configura√ß√£o"!');
                return;
            }
            
            if (projects.length === 0) {
                alert('N√£o h√° projetos para fazer backup!');
                return;
            }
            
            const backupBtn = document.getElementById('backup-btn');
            const originalText = backupBtn.innerHTML;
            
            try {
                backupBtn.disabled = true;
                backupBtn.innerHTML = 'Fazendo backup...';
                
                const success = await performAutoBackup('manual', 'Backup manual');
                
                if (success) {
                    alert('Backup realizado com sucesso!');
                    loadBackupHistory();
                } else {
                    throw new Error('Falha no backup');
                }
            } catch (error) {
                console.error('Erro no backup:', error);
                alert('Erro ao fazer backup. Verifique sua conex√£o e configura√ß√µes.');
            } finally {
                backupBtn.disabled = false;
                backupBtn.innerHTML = originalText;
            }
        }

        // Fun√ß√£o para restaurar projetos do backup
        async function restoreFromBackup() {
            if (!supabaseConfig.url || !supabaseConfig.key) {
                alert('Configure o Supabase primeiro na aba "Configura√ß√£o"!');
                return;
            }
            
            const restoreBtn = document.getElementById('restore-btn');
            const originalText = restoreBtn.innerHTML;
            
            try {
                restoreBtn.disabled = true;
                restoreBtn.innerHTML = 'Carregando backups...';
                
                // Buscar todos os backups dispon√≠veis
                const response = await fetch(`${supabaseConfig.url}/rest/v1/projects_backup?order=created_at.desc&limit=20`, {
                    method: 'GET',
                    headers: {
                        'apikey': supabaseConfig.key,
                        'Authorization': `Bearer ${supabaseConfig.key}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`Erro ${response.status}: ${response.statusText}`);
                }
                
                const backups = await response.json();
                
                if (backups.length === 0) {
                    alert('Nenhum backup encontrado no banco de dados!');
                    return;
                }
                
                // Mostrar modal de sele√ß√£o de backup
                showRestoreModal(backups);
                
            } catch (error) {
                console.error('Erro ao buscar backups:', error);
                alert('Erro ao buscar backups. Verifique sua conex√£o e configura√ß√µes.');
            } finally {
                restoreBtn.disabled = false;
                restoreBtn.innerHTML = originalText;
            }
        }

        // Fun√ß√£o para mostrar modal de sele√ß√£o de backup
        function showRestoreModal(backups) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.id = 'restore-modal';
            
            const backupTypeText = {
                'manual': 'Manual',
                'criacao': 'Cria√ß√£o',
                'edicao': 'Edi√ß√£o',
                'exclusao': 'Exclus√£o',
                'ativacao': 'Ativa√ß√£o'
            };
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto m-4 w-full">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold text-gray-800">Restaurar Projetos do Backup</h3>
                            <button onclick="closeRestoreModal()" class="text-gray-500 hover:text-gray-700">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="flex items-start">
                                <svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"></path>
                                </svg>
                                <div>
                                    <h4 class="text-sm font-medium text-yellow-800">Aten√ß√£o!</h4>
                                    <p class="text-sm text-yellow-700 mt-1">
                                        Restaurar um backup ir√° <strong>substituir todos os projetos atuais</strong>. 
                                        Recomendamos fazer um backup dos dados atuais antes de continuar.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h4 class="text-lg font-semibold text-gray-800 mb-3">Selecione um backup para restaurar:</h4>
                            <div class="space-y-3 max-h-96 overflow-y-auto">
                                ${backups.map((backup, index) => `
                                    <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors" onclick="selectBackup(${index})">
                                        <div class="flex justify-between items-start">
                                            <div class="flex-1">
                                                <div class="flex items-center gap-3 mb-2">
                                                    <input type="radio" name="backup-selection" value="${index}" class="text-custom-blue focus:ring-custom-blue">
                                                    <div>
                                                        <div class="font-semibold text-gray-800">${backup.projects_count} projetos</div>
                                                        <div class="text-sm text-gray-600">${new Date(backup.backup_date).toLocaleString('pt-BR')}</div>
                                                    </div>
                                                </div>
                                                
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-500">
                                                    <div>Tipo: ${backupTypeText[backup.backup_type] || backup.backup_type}</div>
                                                    ${backup.last_project ? `<div>√öltimo projeto: ${backup.last_project}</div>` : ''}
                                                    <div>ID: ${backup.id}</div>
                                                    <div>Usu√°rio: ${backup.user_id}</div>
                                                </div>
                                                
                                                ${backup.projects_data && backup.projects_data.length > 0 ? `
                                                    <div class="mt-2 text-xs text-gray-400">
                                                        Projetos: ${backup.projects_data.slice(0, 3).map(p => p.title).join(', ')}${backup.projects_data.length > 3 ? '...' : ''}
                                                    </div>
                                                ` : ''}
                                            </div>
                                            
                                            <div class="text-right">
                                                <div class="text-xs text-gray-400">
                                                    ${backup.projects_count > projects.length ? 
                                                        `<span class="text-green-600">+${backup.projects_count - projects.length} projetos</span>` : 
                                                        backup.projects_count < projects.length ? 
                                                        `<span class="text-red-600">${backup.projects_count - projects.length} projetos</span>` : 
                                                        '<span class="text-gray-600">Mesmo n√∫mero</span>'
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="flex gap-3 pt-4 border-t">
                            <button onclick="executeRestore()" id="execute-restore-btn" class="flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                                Restaurar Backup Selecionado
                            </button>
                            <button onclick="closeRestoreModal()" class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Armazenar backups para uso posterior
            window.availableBackups = backups;
        }

        // Fun√ß√£o para selecionar backup
        function selectBackup(index) {
            const radio = document.querySelector(`input[name="backup-selection"][value="${index}"]`);
            if (radio) {
                radio.checked = true;
            }
        }

        // Fun√ß√£o para executar a restaura√ß√£o
        async function executeRestore() {
            const selectedRadio = document.querySelector('input[name="backup-selection"]:checked');
            
            if (!selectedRadio) {
                alert('Por favor, selecione um backup para restaurar!');
                return;
            }
            
            const backupIndex = parseInt(selectedRadio.value);
            const selectedBackup = window.availableBackups[backupIndex];
            
            if (!selectedBackup || !selectedBackup.projects_data) {
                alert('Backup selecionado n√£o cont√©m dados v√°lidos!');
                return;
            }
            
            // Confirma√ß√£o final
            const confirmMessage = `
Tem certeza que deseja restaurar este backup?

üìä Backup selecionado:
‚Ä¢ Data: ${new Date(selectedBackup.backup_date).toLocaleString('pt-BR')}
‚Ä¢ Projetos: ${selectedBackup.projects_count}
‚Ä¢ Tipo: ${selectedBackup.backup_type}

‚ö†Ô∏è ATEN√á√ÉO: Todos os ${projects.length} projetos atuais ser√£o substitu√≠dos!

Esta a√ß√£o n√£o pode ser desfeita.
            `;
            
            if (!confirm(confirmMessage)) {
                return;
            }
            
            const executeBtn = document.getElementById('execute-restore-btn');
            const originalText = executeBtn.innerHTML;
            
            try {
                executeBtn.disabled = true;
                executeBtn.innerHTML = 'Restaurando...';
                
                // Fazer backup dos dados atuais antes de restaurar
                if (projects.length > 0) {
                    console.log('Fazendo backup de seguran√ßa dos dados atuais...');
                    await performAutoBackup('pre_restore', `Backup antes de restaurar ${selectedBackup.projects_count} projetos`);
                }
                
                // Restaurar projetos do backup
                const restoredProjects = selectedBackup.projects_data.map(projectData => ({
                    id: projectData.id || Date.now() + Math.floor(Math.random() * 1000),
                    title: projectData.title || 'Projeto sem t√≠tulo',
                    description: projectData.description || 'Sem descri√ß√£o',
                    link: projectData.link || '',
                    date: projectData.date || new Date().toISOString().split('T')[0],
                    progress: projectData.progress || 0,
                    status: projectData.status || 'planning',
                    createdAt: projectData.createdAt || new Date().toISOString(),
                    updatedAt: new Date().toISOString(), // Atualizar data de modifica√ß√£o
                    images: projectData.images || [createDefaultImage()], // Usar imagem padr√£o se n√£o houver
                    video: projectData.video || '',
                    videoFile: null, // Arquivos de v√≠deo n√£o s√£o restaurados
                    priority: projectData.priority || 'normal',
                    category: projectData.category || 'geral',
                    tags: projectData.tags || [],
                    // Marcar como restaurado
                    restoredFrom: selectedBackup.id,
                    restoredAt: new Date().toISOString()
                }));
                
                // Substituir projetos atuais
                projects.length = 0;
                projects.push(...restoredProjects);
                
                // Salvar no localStorage
                const saveSuccess = saveToLocalStorage();
                if (!saveSuccess) {
                    throw new Error('Falha ao salvar dados restaurados');
                }
                
                // Fazer backup autom√°tico da restaura√ß√£o
                if (autoBackupEnabled) {
                    await performAutoBackup('restauracao', `${restoredProjects.length} projetos restaurados`);
                }
                
                // Atualizar interface
                renderProjects('projects-grid');
                renderProjects('projects-only-grid');
                updateLocalProjectsCount();
                
                // Fechar modal
                closeRestoreModal();
                
                // Mostrar mensagem de sucesso
                alert(`‚úÖ Restaura√ß√£o conclu√≠da com sucesso!

üìä Resultado:
‚Ä¢ ${restoredProjects.length} projetos restaurados
‚Ä¢ Data do backup: ${new Date(selectedBackup.backup_date).toLocaleString('pt-BR')}
‚Ä¢ Backup de seguran√ßa criado automaticamente

Os projetos foram atualizados na interface!`);
                
                console.log(`üîÑ Restaura√ß√£o conclu√≠da: ${restoredProjects.length} projetos restaurados do backup ${selectedBackup.id}`);
                
            } catch (error) {
                console.error('Erro durante a restaura√ß√£o:', error);
                alert('‚ùå Erro durante a restaura√ß√£o. Verifique o console para mais detalhes.');
            } finally {
                executeBtn.disabled = false;
                executeBtn.innerHTML = originalText;
            }
        }

        // Fun√ß√£o para fechar modal de restaura√ß√£o
        function closeRestoreModal() {
            const modal = document.getElementById('restore-modal');
            if (modal) {
                modal.remove();
            }
            // Limpar dados tempor√°rios
            if (window.availableBackups) {
                delete window.availableBackups;
            }
        }

        // Atualizar status do backup na interface
        function updateBackupStatus(status, action) {
            const statusIndicator = document.getElementById('backup-status-indicator');
            if (!statusIndicator) return;
            
            const now = new Date().toLocaleTimeString('pt-BR');
            
            if (status === 'success') {
                statusIndicator.innerHTML = `
                    <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                    √öltimo backup: ${now} (${action})
                `;
                statusIndicator.className = 'text-xs text-green-600';
            } else if (status === 'error') {
                statusIndicator.innerHTML = `
                    <span class="inline-block w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                    Erro no backup: ${now}
                `;
                statusIndicator.className = 'text-xs text-red-600';
            }
        }

        async function loadBackupHistory() {
            if (!supabaseConfig.url || !supabaseConfig.key) {
                return;
            }
            
            try {
                const response = await fetch(`${supabaseConfig.url}/rest/v1/projects_backup?order=created_at.desc&limit=10`, {
                    method: 'GET',
                    headers: {
                        'apikey': supabaseConfig.key,
                        'Authorization': `Bearer ${supabaseConfig.key}`
                    }
                });
                
                if (response.ok) {
                    const backups = await response.json();
                    displayBackupHistory(backups);
                }
            } catch (error) {
                console.error('Erro ao carregar hist√≥rico:', error);
            }
        }

        function displayBackupHistory(backups) {
            const historyElement = document.getElementById('backup-history');
            
            if (backups.length === 0) {
                historyElement.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhum backup realizado ainda</p>';
                return;
            }
            
            historyElement.innerHTML = backups.map(backup => {
                const backupTypeText = {
                    'manual': 'Manual',
                    'criacao': 'Cria√ß√£o',
                    'edicao': 'Edi√ß√£o',
                    'exclusao': 'Exclus√£o',
                    'ativacao': 'Ativa√ß√£o',
                    'pre_sync': 'Pr√©-Sincroniza√ß√£o',
                    'pre_restore': 'Pr√©-Restaura√ß√£o',
                    'restauracao': 'Restaura√ß√£o'
                };
                
                const typeColor = {
                    'manual': 'text-blue-600',
                    'criacao': 'text-green-600',
                    'edicao': 'text-yellow-600',
                    'exclusao': 'text-red-600',
                    'ativacao': 'text-purple-600',
                    'pre_sync': 'text-indigo-600',
                    'pre_restore': 'text-orange-600',
                    'restauracao': 'text-teal-600'
                };
                
                return `
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <div>
                            <div class="font-medium text-gray-800">${backup.projects_count} projetos</div>
                            <div class="text-sm text-gray-500">${new Date(backup.backup_date).toLocaleString('pt-BR')}</div>
                            ${backup.backup_type ? `<div class="text-xs ${typeColor[backup.backup_type] || 'text-gray-400'}">${backupTypeText[backup.backup_type] || backup.backup_type}</div>` : ''}
                            ${backup.last_project ? `<div class="text-xs text-blue-600">√öltimo: ${backup.last_project}</div>` : ''}
                        </div>
                        <div class="text-green-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Fun√ß√£o para ativar/desativar backup autom√°tico
        function toggleAutoBackup() {
            const toggle = document.getElementById('auto-backup-toggle');
            const statusIndicator = document.getElementById('backup-status-indicator');
            
            autoBackupEnabled = toggle.checked;
            localStorage.setItem('auto_backup_enabled', autoBackupEnabled.toString());
            
            if (autoBackupEnabled) {
                if (!supabaseConfig.url || !supabaseConfig.key) {
                    toggle.checked = false;
                    autoBackupEnabled = false;
                    localStorage.setItem('auto_backup_enabled', 'false');
                    alert('Configure o Supabase primeiro antes de ativar o backup autom√°tico!');
                    return;
                }
                
                statusIndicator.innerHTML = `
                    <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                    Backup autom√°tico ativado
                `;
                statusIndicator.className = 'text-xs text-green-600';
                
                // Fazer backup inicial
                performAutoBackup('ativacao', 'Sistema ativado');
            } else {
                statusIndicator.innerHTML = `
                    <span class="inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"></span>
                    Backup autom√°tico desativado
                `;
                statusIndicator.className = 'text-xs text-gray-500';
            }
        }

        // Fechar modal de configura√ß√£o ao clicar fora
        document.getElementById('supabase-config-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSupabaseConfig();
            }
        });

        // Fun√ß√£o para exportar para Excel
        function exportToExcel() {
            if (projects.length === 0) {
                alert('N√£o h√° projetos para exportar!');
                return;
            }

            // Preparar dados para Excel com formata√ß√£o melhorada
            const excelData = projects.map((project, index) => ({
                'N¬∫': index + 1,
                'ID do Projeto': project.id,
                'T√≠tulo do Projeto': project.title,
                'Descri√ß√£o Completa': project.description,
                'URL do Projeto': project.link || 'N√£o informado',
                'Data de Cria√ß√£o': project.date ? new Date(project.date).toLocaleDateString('pt-BR') : 'N√£o informada',
                'Data de Cadastro': project.createdAt ? new Date(project.createdAt).toLocaleDateString('pt-BR') : 'N√£o informada',
                'Hora de Cadastro': project.createdAt ? new Date(project.createdAt).toLocaleTimeString('pt-BR') : 'N√£o informada',
                'Quantidade de Imagens': project.images.length,
                'Possui V√≠deo': project.video || project.videoFile ? 'Sim' : 'N√£o',
                'Tipo de V√≠deo': project.video ? 'Link Externo' : project.videoFile ? 'Arquivo Local' : 'Nenhum',
                'Status do Link': project.link ? 'Dispon√≠vel' : 'N√£o informado'
            }));

            // Criar HTML formatado para Excel
            let htmlContent = `
                <html>
                <head>
                    <meta charset="UTF-8">
                    <style>
                        table { border-collapse: collapse; width: 100%; font-family: 'Montserrat', sans-serif; }
                        th { background-color: #8e44ad; color: white; font-weight: bold; padding: 12px; border: 1px solid #ddd; text-align: center; }
                        td { padding: 10px; border: 1px solid #ddd; text-align: left; vertical-align: top; }
                        tr:nth-child(even) { background-color: #f9f9f9; }
                        tr:hover { background-color: #f5f5f5; }
                        .number { text-align: center; font-weight: bold; }
                        .date { text-align: center; }
                        .status-sim { color: #27ae60; font-weight: bold; }
                        .status-nao { color: #e74c3c; }
                    </style>
                </head>
                <body>
                    <h2 style="color: #8e44ad; text-align: center; margin-bottom: 20px;">Relat√≥rio de Projetos - ${new Date().toLocaleDateString('pt-BR')}</h2>
                    <table>
                        <thead>
                            <tr>`;

            // Adicionar cabe√ßalhos
            const headers = Object.keys(excelData[0]);
            headers.forEach(header => {
                htmlContent += `<th>${header}</th>`;
            });
            htmlContent += `</tr></thead><tbody>`;

            // Adicionar dados
            excelData.forEach(row => {
                htmlContent += '<tr>';
                headers.forEach(header => {
                    let cellClass = '';
                    let cellValue = row[header];
                    
                    // Aplicar classes CSS baseadas no conte√∫do
                    if (header === 'N¬∫' || header === 'Quantidade de Imagens') {
                        cellClass = 'number';
                    } else if (header.includes('Data') || header.includes('Hora')) {
                        cellClass = 'date';
                    } else if (cellValue === 'Sim' || cellValue === 'Dispon√≠vel') {
                        cellClass = 'status-sim';
                    } else if (cellValue === 'N√£o' || cellValue === 'N√£o informado' || cellValue === 'Nenhum') {
                        cellClass = 'status-nao';
                    }
                    
                    htmlContent += `<td class="${cellClass}">${cellValue}</td>`;
                });
                htmlContent += '</tr>';
            });

            htmlContent += `
                        </tbody>
                    </table>
                    <div style="margin-top: 20px; text-align: center; color: #666; font-size: 12px;">
                        <p>Total de projetos: ${projects.length}</p>
                        <p>Relat√≥rio gerado em: ${new Date().toLocaleString('pt-BR')}</p>
                    </div>
                </body>
                </html>
            `;

            // Criar e baixar arquivo
            const blob = new Blob([htmlContent], { type: 'application/vnd.ms-excel' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `projetos_portfolio_${new Date().toISOString().split('T')[0]}.xls`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Fun√ß√£o para exportar para JSON
        function exportToJSON() {
            if (projects.length === 0) {
                alert('N√£o h√° projetos para exportar!');
                return;
            }

            const exportData = {
                exportDate: new Date().toISOString(),
                version: '1.0',
                totalProjects: projects.length,
                projects: projects.map(project => ({
                    ...project,
                    // Remover dados bin√°rios grandes para reduzir tamanho do arquivo
                    images: project.images.length, // Apenas contar imagens
                    videoFile: project.videoFile ? 'Arquivo presente' : null
                }))
            };

            const jsonString = JSON.stringify(exportData, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `projetos_portfolio_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // ==================== LOCALSTORAGE FUNCTIONS ====================
        
        // Salvar projetos no localStorage
        function saveToLocalStorage() {
            try {
                const dataToSave = JSON.stringify(projects);
                localStorage.setItem('portfolio_projects', dataToSave);
                localStorage.setItem('portfolio_last_save', new Date().toISOString());
                console.log(`Dados salvos no localStorage: ${projects.length} projetos`);
                return true;
            } catch (error) {
                console.error('Erro ao salvar no localStorage:', error);
                alert('Erro ao salvar dados localmente. Verifique o espa√ßo dispon√≠vel.');
                return false;
            }
        }
        
        // Carregar projetos do localStorage
        function loadFromLocalStorage() {
            try {
                const savedProjects = localStorage.getItem('portfolio_projects');
                if (savedProjects) {
                    const parsedProjects = JSON.parse(savedProjects);
                    if (Array.isArray(parsedProjects)) {
                        projects.length = 0; // Limpar array atual
                        projects.push(...parsedProjects);
                        
                        // Migrar projetos antigos para novo formato se necess√°rio
                        projects.forEach(project => {
                            if (!project.status) project.status = 'active';
                            if (!project.priority) project.priority = 'normal';
                            if (!project.category) project.category = 'geral';
                            if (!project.tags) project.tags = [];
                            if (!project.updatedAt) project.updatedAt = project.createdAt || new Date().toISOString();
                        });
                        
                        console.log(`${projects.length} projetos carregados do localStorage`);
                    }
                }
            } catch (error) {
                console.error('Erro ao carregar do localStorage:', error);
                alert('Erro ao carregar dados salvos. Os dados podem estar corrompidos.');
            }
        }
        
        // Limpar localStorage
        function clearLocalStorage() {
            if (confirm('Tem certeza que deseja limpar todos os dados salvos? Esta a√ß√£o n√£o pode ser desfeita.')) {
                localStorage.removeItem('portfolio_projects');
                localStorage.removeItem('portfolio_last_save');
                projects.length = 0;
                renderProjects('projects-grid');
                renderProjects('projects-only-grid');
                alert('Dados limpos com sucesso!');
            }
        }
        
        // Obter informa√ß√µes do localStorage
        function getLocalStorageInfo() {
            const lastSave = localStorage.getItem('portfolio_last_save');
            const projectsData = localStorage.getItem('portfolio_projects');
            
            return {
                lastSave: lastSave ? new Date(lastSave) : null,
                dataSize: projectsData ? new Blob([projectsData]).size : 0,
                projectsCount: projects.length,
                hasData: !!projectsData
            };
        }
        
        // ==================== END LOCALSTORAGE FUNCTIONS ====================
        
        // Fun√ß√µes da barra de progresso
        function updateProgressBar(sliderId, valueId) {
            const slider = document.getElementById(sliderId);
            const valueSpan = document.getElementById(valueId);
            
            if (!slider || !valueSpan) return;
            
            const value = slider.value;
            valueSpan.textContent = value + '%';
            
            // Atualizar o gradiente do slider
            const percentage = (value / 100) * 100;
            slider.style.setProperty('--progress', percentage + '%');
            slider.style.background = `linear-gradient(to right, #8e44ad 0%, #02C2E9 ${percentage}%, #e5e7eb ${percentage}%, #e5e7eb 100%)`;
        }

        function setupProgressSliders() {
            // Configurar slider do formul√°rio sidebar
            const sidebarSlider = document.getElementById('project-progress');
            if (sidebarSlider) {
                sidebarSlider.addEventListener('input', function() {
                    updateProgressBar('project-progress', 'progress-value');
                });
                // Inicializar
                updateProgressBar('project-progress', 'progress-value');
            }

            // Configurar slider do modal
            const modalSlider = document.getElementById('modal-project-progress');
            if (modalSlider) {
                modalSlider.addEventListener('input', function() {
                    updateProgressBar('modal-project-progress', 'modal-progress-value');
                });
                // Inicializar
                updateProgressBar('modal-project-progress', 'modal-progress-value');
            }
        }

        // Fun√ß√£o para obter emoji do status
        function getStatusEmoji(status) {
            const statusEmojis = {
                'planning': 'üéØ',
                'development': '‚ö°',
                'testing': 'üß™',
                'completed': '‚úÖ',
                'paused': '‚è∏Ô∏è',
                'cancelled': '‚ùå'
            };
            return statusEmojis[status] || 'üéØ';
        }

        // Fun√ß√£o para obter texto do status
        function getStatusText(status) {
            const statusTexts = {
                'planning': 'Planejamento',
                'development': 'Em Desenvolvimento',
                'testing': 'Em Testes',
                'completed': 'Conclu√≠do',
                'paused': 'Pausado',
                'cancelled': 'Cancelado'
            };
            return statusTexts[status] || 'Planejamento';
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Definir data padr√£o como hoje
            const today = new Date().toISOString().split('T')[0];
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                if (!input.value) input.value = today;
            });
            
            // Configurar sliders de progresso
            setupProgressSliders();
            
            // Carregar projetos do localStorage
            loadFromLocalStorage();
            
            // Configurar estado inicial do backup autom√°tico
            const autoBackupToggle = document.getElementById('auto-backup-toggle');
            if (autoBackupToggle) {
                autoBackupToggle.checked = autoBackupEnabled;
                
                // Atualizar status inicial
                const statusIndicator = document.getElementById('backup-status-indicator');
                if (statusIndicator) {
                    if (autoBackupEnabled && supabaseConfig.url && supabaseConfig.key) {
                        statusIndicator.innerHTML = `
                            <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                            Backup autom√°tico ativado
                        `;
                        statusIndicator.className = 'text-xs text-green-600';
                    } else {
                        statusIndicator.innerHTML = `
                            <span class="inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"></span>
                            Backup autom√°tico desativado
                        `;
                        statusIndicator.className = 'text-xs text-gray-500';
                    }
                }
            }
            
            // Renderizar projetos iniciais
            renderProjects('projects-grid');
            renderProjects('projects-only-grid');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'976f4124b1a71e65',t:'MTc1NjUwNDEyNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
