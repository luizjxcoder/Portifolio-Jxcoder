<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfólio Moderno</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'custom-gray': '#f5f5f5',
                        'custom-purple': '#8e44ad',
                        'custom-blue': '#02C2E9'
                    },
                    fontFamily: {
                        'sans': ['Montserrat', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-border {
            background: linear-gradient(135deg, #8e44ad, #02C2E9);
            padding: 2px;
            border-radius: 12px;
        }
        
        .gradient-border-content {
            background: white;
            border-radius: 10px;
            height: 100%;
        }
        
        .slide-container {
            position: relative;
            overflow: hidden;
        }
        
        .slide {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            background: linear-gradient(135deg, #8e44ad, #02C2E9);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }
    </style>
</head>
<body class="bg-custom-gray min-h-screen">
    <!-- Menu Fixo -->
    <nav class="fixed top-0 left-0 right-0 bg-white shadow-lg z-50">
        <div class="max-w-[1700px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0 flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-custom-purple to-custom-blue rounded-full flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                    </div>
                    <h1 class="text-2xl font-bold bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">
                        Meu Portfólio JXCoder
                    </h1>
                </div>
                <div class="hidden xl:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#" class="nav-link active text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('home')">Home</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('projects')">Projetos</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('about')">Sobre</a>
                        <a href="#" class="nav-link text-gray-700 hover:text-custom-blue px-3 py-2 text-sm font-medium" onclick="showSection('contact')">Contato</a>
                    </div>
                </div>
                <div class="xl:hidden flex items-center space-x-3">
                    <button onclick="openProjectModal()" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-3 py-2 rounded-lg font-medium hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-xs">
                        + Projeto
                    </button>
                    <button onclick="toggleMobileMenu()" class="text-gray-700 hover:text-custom-blue">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Menu Mobile -->
        <div id="mobile-menu" class="xl:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t">
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue" onclick="showSection('home'); toggleMobileMenu()">Home</a>
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue" onclick="showSection('projects'); toggleMobileMenu()">Projetos</a>
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue" onclick="showSection('about'); toggleMobileMenu()">Sobre</a>
                <a href="#" class="block px-3 py-2 text-gray-700 hover:text-custom-blue" onclick="showSection('contact'); toggleMobileMenu()">Contato</a>
            </div>
        </div>
    </nav>

    <!-- Conteúdo Principal -->
    <main class="pt-20 pb-8">
        <!-- Seção Home -->
        <section id="home" class="section-content">
            <div class="max-w-[1700px] mx-auto px-4 sm:px-6 lg:px-8">


                <!-- Título e Controles de Layout para Dashboard -->
                <div class="mb-8 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
                    <h2 class="text-4xl font-bold text-gray-800">
                        <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Dashboard</span>
                    </h2>
                    
                    <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">
                        <!-- Botões de Exportação -->
                        <div class="flex bg-white rounded-full shadow-sm border border-gray-200 p-1">
                            <button onclick="exportToExcel()" class="flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800 hover:bg-gray-50">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                Excel
                            </button>
                            <button onclick="exportToJSON()" class="flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800 hover:bg-gray-50">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                JSON
                            </button>
                            <button onclick="openSupabaseConfig()" class="flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
                                </svg>
                                Backup
                            </button>
                        </div>
                        
                        <!-- Controles de Layout -->
                        <div class="flex bg-white rounded-full shadow-sm border border-gray-200 p-1">
                            <button id="grid-view-btn" onclick="changeLayout('grid')" class="flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                                </svg>
                                Grade
                            </button>
                            <button id="list-view-btn" onclick="changeLayout('list')" class="flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                                </svg>
                                Lista
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Layout Responsivo: Botão + Cards e Formulário -->
                <div class="flex flex-col xl:flex-row gap-6">
                    <!-- Sidebar com Formulário (Esquerda em telas grandes) -->
                    <div id="form-sidebar" class="w-full xl:w-0 xl:flex-shrink-0 xl:sticky xl:top-24 xl:h-fit transition-all duration-500 ease-in-out overflow-hidden">
                        <!-- Formulário para telas grandes (1280px+) -->
                        <div id="project-form-container" class="hidden xl:block gradient-border transition-all duration-500 ease-in-out" style="max-height: 0; opacity: 0;">
                            <div class="gradient-border-content p-5">
                                <h3 class="text-lg font-bold text-gray-800 mb-5 text-center">Adicionar Novo Projeto</h3>
                                <form id="project-form" class="space-y-3">
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Título do Projeto</label>
                                        <input type="text" id="project-title" required class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Descrição Curta</label>
                                        <textarea id="project-description" required rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm"></textarea>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Link do Projeto</label>
                                        <input type="url" id="project-link" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Imagens (múltiplas)</label>
                                        <input type="file" id="project-images" multiple accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                        <p class="text-xs text-gray-500 mt-1">Múltiplas imagens para galeria</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Data de Criação</label>
                                        <input type="date" id="project-date" value="" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Vídeo (YouTube/Vimeo)</label>
                                        <input type="text" id="project-video" placeholder="Link do YouTube/Vimeo" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm mb-2">
                                        <input type="file" id="project-video-file" accept="video/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent text-sm">
                                    </div>
                                    
                                    <div class="flex gap-2 pt-2">
                                        <button type="submit" class="flex-1 bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2.5 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-sm">
                                            Adicionar
                                        </button>
                                        <button type="button" onclick="toggleProjectForm()" class="px-4 py-2.5 border border-gray-300 text-gray-700 rounded-full hover:bg-gray-50 transition-all duration-300 text-sm">
                                            Fechar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Container Principal: Botão + Cards -->
                    <div id="main-content" class="flex-1 min-w-0 transition-all duration-500 ease-in-out">
                        <!-- Botão New próximo aos cards -->
                        <div class="hidden xl:flex items-center gap-4 mb-6">
                            <button id="toggle-form-btn" onclick="toggleProjectForm()" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2 px-3 rounded-lg font-medium hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center gap-2 text-sm">
                                <svg id="form-icon" class="w-4 h-4 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                <span id="form-btn-text">New</span>
                            </button>
                            <div class="h-px bg-gray-200 flex-1"></div>
                        </div>
                        
                        <!-- Grid de Projetos -->
                        <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4">
                            <!-- Projetos serão inseridos aqui dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seção Projetos -->
        <section id="projects" class="section-content hidden">
            <div class="max-w-[1700px] mx-auto px-4 sm:px-6 lg:px-8">
                <!-- Título e Controles de Layout para Projetos -->
                <div class="mb-8 flex justify-between items-center">
                    <h2 class="text-4xl font-bold text-gray-800">
                        Meus <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Projetos</span>
                    </h2>
                    <div class="flex bg-white rounded-full shadow-sm border border-gray-200 p-1">
                        <button id="projects-grid-view-btn" onclick="changeProjectsLayout('grid')" class="flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                            Grade
                        </button>
                        <button id="projects-list-view-btn" onclick="changeProjectsLayout('list')" class="flex items-center px-3 py-2 rounded-full text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                            </svg>
                            Lista
                        </button>
                    </div>
                </div>
                
                <div id="projects-only-grid" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                    <!-- Projetos serão inseridos aqui dinamicamente -->
                </div>
            </div>
        </section>

        <!-- Seção Sobre -->
        <section id="about" class="section-content hidden">
            <div class="max-w-[1700px] mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-4xl font-bold text-gray-800 mb-8">
                    Sobre <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Mim</span>
                </h2>
                <div class="gradient-border">
                    <div class="gradient-border-content p-8">
                        <p class="text-lg text-gray-600 mb-6">
                            Sou um desenvolvedor apaixonado por criar soluções inovadoras e experiências digitais únicas. 
                            Com experiência em diversas tecnologias, busco sempre entregar projetos de alta qualidade.
                        </p>
                        <p class="text-lg text-gray-600">
                            Minha missão é transformar ideias em realidade através do código, criando aplicações que fazem a diferença na vida das pessoas.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seção Contato -->
        <section id="contact" class="section-content hidden">
            <div class="max-w-[1700px] mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-4xl font-bold text-center text-gray-800 mb-12">
                    Entre em <span class="bg-gradient-to-r from-custom-purple to-custom-blue bg-clip-text text-transparent">Contato</span>
                </h2>
                <div class="max-w-2xl mx-auto">
                    <div class="gradient-border">
                        <div class="gradient-border-content p-8">
                            <form class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome</label>
                                <input type="text" required class="w-full px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" required class="w-full px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem</label>
                                <textarea rows="5" required class="w-full px-4 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-custom-blue focus:border-transparent"></textarea>
                            </div>
                            <button type="submit" class="w-full bg-gradient-to-r from-custom-purple to-custom-blue text-white py-3 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                                Enviar Mensagem
                            </button>
                        </form>
                        <div class="mt-8 text-center">
                            <p class="text-gray-600 mb-4">Ou me encontre nas redes sociais:</p>
                            <div class="flex justify-center space-x-6">
                                <a href="#" class="text-custom-purple hover:text-custom-blue transition-colors">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                                    </svg>
                                </a>
                                <a href="#" class="text-custom-purple hover:text-custom-blue transition-colors">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                    </svg>
                                </a>
                                <a href="#" class="text-custom-purple hover:text-custom-blue transition-colors">
                                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal para Visualização -->
    <div id="project-modal" class="modal">
        <div class="bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto m-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="modal-title" class="text-2xl font-bold text-gray-800"></h3>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="modal-content" class="space-y-6">
                    <!-- Conteúdo do modal será inserido aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Formulário de Projeto -->
    <div id="project-form-modal" class="modal">
        <div class="bg-white rounded-lg max-w-md max-h-[90vh] overflow-y-auto m-4 w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Adicionar Novo Projeto</h3>
                    <button onclick="closeProjectModal()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <form id="project-form-modal-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Título do Projeto</label>
                        <input type="text" id="modal-project-title" required class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Descrição Curta</label>
                        <textarea id="modal-project-description" required rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-custom-blue focus:border-transparent"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Link do Projeto</label>
                        <input type="url" id="modal-project-link" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Imagens (múltiplas)</label>
                        <input type="file" id="modal-project-images" multiple accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                        <p class="text-xs text-gray-500 mt-1">Múltiplas imagens para galeria</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Data de Criação</label>
                        <input type="date" id="modal-project-date" value="" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Vídeo (YouTube/Vimeo)</label>
                        <input type="text" id="modal-project-video" placeholder="Link do YouTube/Vimeo" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent mb-2">
                        <input type="file" id="modal-project-video-file" accept="video/*" class="w-full px-3 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                    </div>
                    
                    <button type="submit" class="w-full bg-gradient-to-r from-custom-purple to-custom-blue text-white py-3 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                        Adicionar Projeto
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para Configuração do Supabase -->
    <div id="supabase-config-modal" class="modal">
        <div class="bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto m-4 w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800">Configurar Backup Online (Supabase)</h3>
                    <button onclick="closeSupabaseConfig()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Abas -->
                <div class="flex border-b border-gray-200 mb-6">
                    <button id="tab-tutorial" onclick="switchTab('tutorial')" class="px-4 py-2 text-sm font-medium text-custom-blue border-b-2 border-custom-blue">
                        Tutorial Passo a Passo
                    </button>
                    <button id="tab-config" onclick="switchTab('config')" class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 ml-4">
                        Configuração
                    </button>
                    <button id="tab-status" onclick="switchTab('status')" class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 ml-4">
                        Status
                    </button>
                </div>
                
                <!-- Conteúdo da Aba Tutorial -->
                <div id="content-tutorial" class="tab-content">
                    <div class="space-y-6">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">O que é o Supabase?</h4>
                            <p class="text-gray-600">O Supabase é uma plataforma gratuita que permite salvar seus projetos na nuvem de forma segura. Assim você nunca perde seus dados!</p>
                        </div>
                        
                        <div class="space-y-4">
                            <h4 class="text-xl font-bold text-gray-800">Passo a Passo Completo:</h4>
                            
                            <div class="space-y-4">
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">1</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Criar conta no Supabase</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Acesse <a href="https://supabase.com" target="_blank" class="text-custom-blue hover:underline">supabase.com</a></li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Start your project"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Faça login com GitHub, Google ou email</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">2</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Criar novo projeto</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "New Project"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Escolha um nome (ex: "meu-portfolio")</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Crie uma senha forte para o banco</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Selecione uma região próxima</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Create new project"</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">3</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Obter as credenciais</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Aguarde o projeto ser criado (1-2 minutos)</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Vá em "Settings" → "API"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Copie a "URL" do projeto</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Copie a "anon public" key</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">4</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Criar tabela no banco</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Vá em "Table Editor"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Create a new table"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Nome da tabela: <code class="bg-gray-100 px-1 rounded">projects_backup</code></li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Adicione as colunas conforme mostrado na aba "Configuração"</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex items-start mb-3">
                                        <span class="bg-custom-purple text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5 flex-shrink-0">5</span>
                                        <div>
                                            <h5 class="font-semibold text-gray-800 mb-2">Configurar no sistema</h5>
                                            <ul class="text-gray-600 space-y-1">
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Vá na aba "Configuração" aqui</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Cole a URL e a chave que você copiou</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Clique em "Testar Conexão"</li>
                                                <li class="flex items-start"><span class="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"></span>Se tudo estiver certo, clique em "Salvar"</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">Pronto!</h4>
                            <p class="text-gray-600">Agora você pode fazer backup dos seus projetos na nuvem com segurança!</p>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo da Aba Configuração -->
                <div id="content-config" class="tab-content hidden">
                    <div class="space-y-6">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h4 class="text-lg font-semibold text-gray-800 mb-2">Importante</h4>
                            <p class="text-gray-600">Antes de configurar, certifique-se de ter seguido todos os passos do tutorial!</p>
                        </div>
                        
                        <form id="supabase-config-form" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    URL do Projeto Supabase
                                    <span class="text-red-500">*</span>
                                </label>
                                <input type="url" id="supabase-url" placeholder="https://seu-projeto.supabase.co" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-blue focus:border-transparent">
                                <p class="text-xs text-gray-500 mt-1">Encontre em Settings → API → Project URL</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Chave Pública (anon key)
                                    <span class="text-red-500">*</span>
                                </label>
                                <textarea id="supabase-key" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-custom-blue focus:border-transparent"></textarea>
                                <p class="text-xs text-gray-500 mt-1">Encontre em Settings → API → Project API keys → anon public</p>
                            </div>
                            
                            <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                                <h5 class="font-semibold text-gray-800 mb-2">📋 SQL para criar a tabela:</h5>
                                <div class="bg-gray-800 text-green-400 p-3 rounded text-sm overflow-x-auto" style="font-family: 'Courier New', monospace;">
                                    <pre>CREATE TABLE projects_backup (
  id SERIAL PRIMARY KEY,
  user_id TEXT NOT NULL,
  backup_date TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  projects_count INTEGER NOT NULL,
  projects_data JSONB NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);</pre>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">Cole este código no SQL Editor do Supabase</p>
                            </div>
                            
                            <div class="flex gap-3">
                                <button type="button" onclick="testSupabaseConnection()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                                    🔍 Testar Conexão
                                </button>
                                <button type="submit" class="flex-1 bg-gradient-to-r from-custom-purple to-custom-blue text-white py-2 px-4 rounded-lg hover:shadow-lg transition-all">
                                    💾 Salvar Configuração
                                </button>
                            </div>
                        </form>
                        
                        <div id="config-status" class="hidden">
                            <!-- Status será mostrado aqui -->
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo da Aba Status -->
                <div id="content-status" class="tab-content hidden">
                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">Status da Conexão</h4>
                                <div id="connection-status" class="text-gray-600">
                                    <span class="inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"></span>
                                    Não configurado
                                </div>
                            </div>
                            
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <h4 class="font-semibold text-gray-800 mb-2">Projetos Locais</h4>
                                <div id="local-projects-count" class="text-2xl font-bold text-custom-purple">0</div>
                            </div>
                        </div>
                        
                        <div class="bg-white border border-gray-200 rounded-lg p-4">
                            <h4 class="font-semibold text-gray-800 mb-4">Histórico de Backups</h4>
                            <div id="backup-history" class="space-y-2">
                                <p class="text-gray-500 text-center py-4">Nenhum backup realizado ainda</p>
                            </div>
                        </div>
                        
                        <div class="flex gap-3">
                            <button onclick="performBackup()" id="backup-btn" class="flex-1 bg-gradient-to-r from-custom-purple to-custom-blue text-white py-3 px-4 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                                Fazer Backup Agora
                            </button>
                            <button onclick="loadBackupHistory()" class="px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                Atualizar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let projects = [];
        let currentSlides = {};
        let currentLayout = 'grid'; // 'grid' ou 'list'
        let projectsLayout = 'grid'; // Layout separado para a página de projetos
        let isFormOpen = false; // Estado do formulário

        // Navegação
        function showSection(sectionName) {
            // Esconder todas as seções
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Mostrar seção selecionada
            document.getElementById(sectionName).classList.remove('hidden');
            
            // Atualizar navegação ativa
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Se for a seção de projetos, renderizar apenas os projetos
            if (sectionName === 'projects') {
                renderProjects('projects-only-grid');
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Função para abrir/fechar formulário
        function toggleProjectForm() {
            const container = document.getElementById('project-form-container');
            const icon = document.getElementById('form-icon');
            const btnText = document.getElementById('form-btn-text');
            const sidebar = document.getElementById('form-sidebar');
            
            if (!isFormOpen) {
                // Abrir formulário
                container.style.maxHeight = '800px';
                container.style.opacity = '1';
                icon.style.transform = 'rotate(45deg)';
                btnText.textContent = 'Close';
                
                // Expandir sidebar para mostrar formulário
                sidebar.classList.remove('xl:w-0');
                sidebar.classList.add('xl:w-80');
                
                isFormOpen = true;
            } else {
                // Fechar formulário
                container.style.maxHeight = '0';
                container.style.opacity = '0';
                icon.style.transform = 'rotate(0deg)';
                btnText.textContent = 'New';
                
                // Recolher sidebar
                sidebar.classList.remove('xl:w-80');
                sidebar.classList.add('xl:w-0');
                
                isFormOpen = false;
                
                // Limpar formulário ao fechar
                document.getElementById('project-form').reset();
            }
        }

        // Função para alterar layout da página principal
        function changeLayout(layout) {
            currentLayout = layout;
            
            // Atualizar botões
            const gridBtn = document.getElementById('grid-view-btn');
            const listBtn = document.getElementById('list-view-btn');
            
            if (layout === 'grid') {
                gridBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                listBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            } else {
                listBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                gridBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            }
            
            // Re-renderizar projetos com novo layout
            renderProjects('projects-grid');
        }

        // Função para alterar layout da página de projetos
        function changeProjectsLayout(layout) {
            projectsLayout = layout;
            
            // Atualizar botões da página de projetos
            const gridBtn = document.getElementById('projects-grid-view-btn');
            const listBtn = document.getElementById('projects-list-view-btn');
            
            if (layout === 'grid') {
                gridBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                listBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            } else {
                listBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-gradient-to-r from-custom-purple to-custom-blue text-white';
                gridBtn.className = 'flex items-center px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:text-gray-800';
            }
            
            // Re-renderizar projetos da página de projetos
            renderProjects('projects-only-grid');
        }

        // Função para abrir modal do formulário
        function openProjectModal() {
            document.getElementById('project-form-modal').classList.add('active');
        }

        function closeProjectModal() {
            document.getElementById('project-form-modal').classList.remove('active');
            document.getElementById('project-form-modal-form').reset();
        }

        // Formulário de cadastro (sidebar)
        document.getElementById('project-form').addEventListener('submit', function(e) {
            e.preventDefault();
            handleProjectSubmission('project-form');
        });

        // Formulário de cadastro (modal)
        document.getElementById('project-form-modal-form').addEventListener('submit', function(e) {
            e.preventDefault();
            handleProjectSubmission('project-form-modal-form');
        });

        function handleProjectSubmission(formId) {
            const isModal = formId === 'project-form-modal-form';
            const prefix = isModal ? 'modal-' : '';
            
            const title = document.getElementById(prefix + 'project-title').value;
            const description = document.getElementById(prefix + 'project-description').value;
            const link = document.getElementById(prefix + 'project-link').value;
            const date = document.getElementById(prefix + 'project-date').value || new Date().toISOString().split('T')[0];
            const images = document.getElementById(prefix + 'project-images').files;
            const videoLink = document.getElementById(prefix + 'project-video').value;
            const videoFile = document.getElementById(prefix + 'project-video-file').files[0];
            
            const project = {
                id: Date.now(),
                title,
                description,
                link,
                date,
                createdAt: new Date().toISOString(),
                images: [],
                video: videoLink || null,
                videoFile: null
            };
            
            // Processar imagens
            if (images.length > 0) {
                Array.from(images).forEach(file => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        project.images.push(e.target.result);
                        if (project.images.length === images.length) {
                            finalizeProject(project, isModal);
                        }
                    };
                    reader.readAsDataURL(file);
                });
            } else {
                // Usar imagem padrão se nenhuma for fornecida
                project.images.push('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNzUgMTIwSDIyNVYxODBIMTc1VjEyMFoiIGZpbGw9IiM5Q0EzQUYiLz4KPHBhdGggZD0iTTE1MCAyMTBIMjUwVjI0MEgxNTBWMjEwWiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K');
                finalizeProject(project, isModal);
            }
            
            // Processar vídeo se houver arquivo
            if (videoFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    project.videoFile = e.target.result;
                };
                reader.readAsDataURL(videoFile);
            }
        }

        function finalizeProject(project, isModal = false) {
            projects.push(project);
            
            // Salvar no localStorage
            saveToLocalStorage();
            
            renderProjects('projects-grid');
            renderProjects('projects-only-grid');
            
            if (isModal) {
                // Fechar modal e limpar formulário
                closeProjectModal();
            } else {
                // Fechar formulário da sidebar e limpar
                toggleProjectForm();
            }
            
            // Mostrar mensagem de sucesso
            alert('Projeto adicionado com sucesso!');
        }

        function renderProjects(containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // Atualizar classes do container baseado no layout
            if (containerId === 'projects-grid') {
                if (currentLayout === 'grid') {
                    container.className = 'grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4';
                } else {
                    container.className = 'space-y-3';
                }
            } else if (containerId === 'projects-only-grid') {
                if (projectsLayout === 'grid') {
                    container.className = 'grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4';
                } else {
                    container.className = 'space-y-3';
                }
            }
            
            projects.forEach(project => {
                const projectCard = createProjectCard(project, containerId);
                container.appendChild(projectCard);
            });
        }

        function createProjectCard(project, containerId = 'projects-grid') {
            const card = document.createElement('div');
            const isListView = (currentLayout === 'list' && containerId === 'projects-grid') || 
                              (projectsLayout === 'list' && containerId === 'projects-only-grid');
            
            // Função para resumir descrição
            const getShortDescription = (description) => {
                return description.length > 60 ? description.substring(0, 60) + '...' : description;
            };
            
            if (isListView) {
                // Layout de Lista - Reduzido
                card.className = 'gradient-border transform hover:scale-[1.02] transition-all duration-300 hover:shadow-xl';
                
                card.innerHTML = `
                    <div class="gradient-border-content p-3">
                        <div class="flex flex-col md:flex-row gap-3">
                            <!-- Imagem menor -->
                            <div class="slide-container w-full md:w-20 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
                                ${project.images.map((img, index) => `
                                    <div class="slide ${index === 0 ? 'active' : ''} h-full">
                                        <img src="${img}" alt="${project.title}" class="w-full h-full object-cover">
                                    </div>
                                `).join('')}
                            </div>
                            
                            <!-- Conteúdo compacto -->
                            <div class="flex-1 flex flex-col justify-between min-h-[3rem]">
                                <div>
                                    <h3 class="text-sm font-bold text-gray-800 mb-1">${project.title}</h3>
                                    <p class="text-gray-600 text-xs leading-relaxed line-clamp-1">${getShortDescription(project.description)}</p>
                                </div>
                                
                                <div class="flex items-center justify-between mt-2">
                                    <button onclick="openModal(${project.id})" class="text-custom-purple hover:text-custom-blue font-medium text-xs">
                                        Ver →
                                    </button>
                                    <div class="flex items-center gap-1">
                                        ${project.link ? `
                                            <a href="${project.link}" target="_blank" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-2 py-1 rounded-full hover:shadow-lg transition-all duration-300 font-medium text-xs">
                                                Abrir
                                            </a>
                                        ` : ''}
                                        <button onclick="deleteProject(${project.id})" class="text-gray-400 hover:text-red-500 p-1 transition-all duration-300 flex-shrink-0" title="Excluir projeto">
                                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Layout de Grade - Reduzido pela metade
                if (containerId === 'projects-grid') {
                    // Cards menores apenas no dashboard
                    card.className = 'gradient-border transform hover:scale-105 transition-all duration-300 hover:shadow-xl';
                    
                    card.innerHTML = `
                        <div class="gradient-border-content p-3 h-full flex flex-col">
                            <div class="slide-container mb-3 h-24 bg-gray-100 rounded-lg overflow-hidden">
                                ${project.images.map((img, index) => `
                                    <div class="slide ${index === 0 ? 'active' : ''} h-full">
                                        <img src="${img}" alt="${project.title}" class="w-full h-full object-cover">
                                    </div>
                                `).join('')}
                                ${project.images.length > 1 ? `
                                    <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                        ${project.images.map((_, index) => `
                                            <button onclick="changeSlide(${project.id}, ${index})" class="w-1 h-1 rounded-full bg-white opacity-50 hover:opacity-100 transition-opacity"></button>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <h3 class="text-sm font-bold text-gray-800 mb-1">${project.title}</h3>
                            <p class="text-gray-600 text-xs mb-2 flex-grow line-clamp-2">${getShortDescription(project.description)}</p>
                            
                            <div class="flex items-center justify-between">
                                <button onclick="openModal(${project.id})" class="text-custom-purple hover:text-custom-blue font-medium text-xs">
                                    Ver →
                                </button>
                                <div class="flex items-center gap-1">
                                    ${project.link ? `
                                        <a href="${project.link}" target="_blank" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-2 py-1 rounded-full hover:shadow-lg transition-all duration-300 text-xs">
                                            Abrir
                                        </a>
                                    ` : ''}
                                    <button onclick="deleteProject(${project.id})" class="text-gray-400 hover:text-red-500 p-1 transition-all duration-300 flex-shrink-0" title="Excluir projeto">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // Cards reduzidos pela metade na página de projetos
                    card.className = 'gradient-border transform hover:scale-105 transition-all duration-300 hover:shadow-xl';
                    
                    card.innerHTML = `
                        <div class="gradient-border-content p-4 h-full flex flex-col">
                            <div class="slide-container mb-3 h-36 bg-gray-100 rounded-lg overflow-hidden">
                                ${project.images.map((img, index) => `
                                    <div class="slide ${index === 0 ? 'active' : ''} h-full">
                                        <img src="${img}" alt="${project.title}" class="w-full h-full object-cover">
                                    </div>
                                `).join('')}
                                ${project.images.length > 1 ? `
                                    <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                        ${project.images.map((_, index) => `
                                            <button onclick="changeSlide(${project.id}, ${index})" class="w-1.5 h-1.5 rounded-full bg-white opacity-50 hover:opacity-100 transition-opacity"></button>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <h3 class="text-lg font-bold text-gray-800 mb-2">${project.title}</h3>
                            <p class="text-gray-600 text-sm mb-3 flex-grow line-clamp-2">${getShortDescription(project.description)}</p>
                            ${project.date ? `<p class="text-xs text-gray-500 mb-2">📅 ${formatDate(project.date)}</p>` : ''}
                            
                            <div class="flex items-center justify-between gap-2">
                                <button onclick="openModal(${project.id})" class="text-custom-purple hover:text-custom-blue font-medium text-xs">
                                    Ver →
                                </button>
                                <div class="flex items-center gap-1">
                                    ${project.link ? `
                                        <a href="${project.link}" target="_blank" class="bg-gradient-to-r from-custom-purple to-custom-blue text-white px-3 py-1.5 rounded-full hover:shadow-lg transition-all duration-300 text-xs">
                                            Abrir
                                        </a>
                                    ` : ''}
                                    <button onclick="deleteProject(${project.id})" class="text-gray-400 hover:text-red-500 p-1 transition-all duration-300 flex-shrink-0" title="Excluir projeto">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            
            // Inicializar slide atual
            currentSlides[project.id] = 0;
            
            // Auto-play para slides
            if (project.images.length > 1) {
                setInterval(() => {
                    const nextSlide = (currentSlides[project.id] + 1) % project.images.length;
                    changeSlide(project.id, nextSlide);
                }, 5000);
            }
            
            return card;
        }

        function changeSlide(projectId, slideIndex) {
            currentSlides[projectId] = slideIndex;
            
            const projectCard = document.querySelector(`[data-project-id="${projectId}"]`) || 
                               Array.from(document.querySelectorAll('.slide-container')).find(container => {
                                   return container.querySelector('.slide img')?.alt === projects.find(p => p.id === projectId)?.title;
                               });
            
            if (projectCard) {
                const slides = projectCard.querySelectorAll('.slide');
                slides.forEach((slide, index) => {
                    slide.classList.toggle('active', index === slideIndex);
                });
                
                const dots = projectCard.querySelectorAll('button');
                dots.forEach((dot, index) => {
                    dot.classList.toggle('opacity-100', index === slideIndex);
                    dot.classList.toggle('opacity-50', index !== slideIndex);
                });
            }
        }

        function openModal(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            const modal = document.getElementById('project-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            
            modalTitle.textContent = project.title;
            
            modalContent.innerHTML = `
                <div class="space-y-6">
                    <p class="text-gray-600 text-lg">${project.description}</p>
                    
                    <!-- Informações do Projeto -->
                    <div class="bg-gray-50 rounded-lg p-4 space-y-3">
                        <h4 class="text-lg font-semibold text-gray-800">Informações do Projeto</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${project.date ? `
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-custom-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <div>
                                        <span class="text-sm text-gray-500">Data de Criação:</span>
                                        <p class="font-medium text-gray-800">${formatDate(project.date)}</p>
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${project.link ? `
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-custom-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                    </svg>
                                    <div>
                                        <span class="text-sm text-gray-500">Link do Projeto:</span>
                                        <p class="font-medium">
                                            <a href="${project.link}" target="_blank" class="text-custom-blue hover:text-custom-purple transition-colors underline">
                                                ${project.link.length > 40 ? project.link.substring(0, 40) + '...' : project.link}
                                            </a>
                                        </p>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <div>
                                    <span class="text-sm text-gray-500">Imagens:</span>
                                    <p class="font-medium text-gray-800">${project.images.length} ${project.images.length === 1 ? 'imagem' : 'imagens'}</p>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <div>
                                    <span class="text-sm text-gray-500">Cadastrado em:</span>
                                    <p class="font-medium text-gray-800">${project.createdAt ? new Date(project.createdAt).toLocaleDateString('pt-BR') : 'Data não disponível'}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    ${project.images.length > 0 ? `
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-800">Galeria de Imagens</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${project.images.map(img => `
                                    <img src="${img}" alt="${project.title}" class="w-full h-64 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity" onclick="viewFullImage('${img}')">
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    ${project.video || project.videoFile ? `
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-800">Vídeo de Apresentação</h4>
                            ${project.video ? `
                                <div class="aspect-video">
                                    ${project.video.includes('youtube.com') || project.video.includes('youtu.be') ? `
                                        <iframe src="${getYouTubeEmbedUrl(project.video)}" class="w-full h-full rounded-lg" frameborder="0" allowfullscreen></iframe>
                                    ` : project.video.includes('vimeo.com') ? `
                                        <iframe src="${getVimeoEmbedUrl(project.video)}" class="w-full h-full rounded-lg" frameborder="0" allowfullscreen></iframe>
                                    ` : `
                                        <video controls class="w-full h-full rounded-lg">
                                            <source src="${project.video}" type="video/mp4">
                                            Seu navegador não suporta o elemento de vídeo.
                                        </video>
                                    `}
                                </div>
                            ` : project.videoFile ? `
                                <div class="aspect-video">
                                    <video controls class="w-full h-full rounded-lg">
                                        <source src="${project.videoFile}" type="video/mp4">
                                        Seu navegador não suporta o elemento de vídeo.
                                    </video>
                                </div>
                            ` : ''}
                        </div>
                    ` : ''}
                    
                    ${project.link ? `
                        <div class="text-center">
                            <a href="${project.link}" target="_blank" class="inline-block bg-gradient-to-r from-custom-purple to-custom-blue text-white px-8 py-3 rounded-full font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                                Acessar Projeto Completo
                            </a>
                        </div>
                    ` : ''}
                </div>
            `;
            
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('project-modal').classList.remove('active');
        }

        function viewFullImage(imageSrc) {
            const fullImageModal = document.createElement('div');
            fullImageModal.className = 'modal active';
            fullImageModal.innerHTML = `
                <div class="max-w-full max-h-full p-4">
                    <img src="${imageSrc}" alt="Imagem ampliada" class="max-w-full max-h-full object-contain rounded-lg">
                    <button onclick="this.parentElement.parentElement.remove()" class="absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `;
            document.body.appendChild(fullImageModal);
        }

        function getYouTubeEmbedUrl(url) {
            const videoId = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);
            return videoId ? `https://www.youtube.com/embed/${videoId[1]}` : url;
        }

        function getVimeoEmbedUrl(url) {
            const videoId = url.match(/vimeo\.com\/(\d+)/);
            return videoId ? `https://player.vimeo.com/video/${videoId[1]}` : url;
        }

        function deleteProject(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            if (confirm(`Tem certeza que deseja excluir o projeto "${project.title}"?`)) {
                // Remover projeto do array
                projects = projects.filter(p => p.id !== projectId);
                
                // Salvar no localStorage
                saveToLocalStorage();
                
                // Atualizar ambos os grids
                renderProjects('projects-grid');
                renderProjects('projects-only-grid');
                
                // Mostrar mensagem de sucesso
                alert('Projeto excluído com sucesso!');
            }
        }

        // Fechar modal ao clicar fora
        document.getElementById('project-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Fechar modal do formulário ao clicar fora
        document.getElementById('project-form-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProjectModal();
            }
        });

        // Função para formatar data
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        // Configuração do Supabase
        let supabaseConfig = {
            url: localStorage.getItem('supabase_url') || '',
            key: localStorage.getItem('supabase_key') || ''
        };

        // Funções do Modal de Configuração do Supabase
        function openSupabaseConfig() {
            document.getElementById('supabase-config-modal').classList.add('active');
            loadSupabaseConfig();
            updateConnectionStatus();
            updateLocalProjectsCount();
        }

        function closeSupabaseConfig() {
            document.getElementById('supabase-config-modal').classList.remove('active');
        }

        function switchTab(tabName) {
            // Remover classe ativa de todas as abas
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.className = 'px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 ml-4';
            });
            
            // Ativar aba selecionada
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            document.getElementById(`tab-${tabName}`).className = 'px-4 py-2 text-sm font-medium text-custom-blue border-b-2 border-custom-blue ml-4';
            
            // Primeira aba não tem margin-left
            if (tabName === 'tutorial') {
                document.getElementById(`tab-${tabName}`).className = 'px-4 py-2 text-sm font-medium text-custom-blue border-b-2 border-custom-blue';
            }
        }

        function loadSupabaseConfig() {
            document.getElementById('supabase-url').value = supabaseConfig.url;
            document.getElementById('supabase-key').value = supabaseConfig.key;
        }

        function updateConnectionStatus() {
            const statusElement = document.getElementById('connection-status');
            
            if (!supabaseConfig.url || !supabaseConfig.key) {
                statusElement.innerHTML = '<span class="inline-block w-2 h-2 bg-gray-400 rounded-full mr-2"></span>Não configurado';
                return;
            }
            
            statusElement.innerHTML = '<span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2"></span>Configurado';
        }

        function updateLocalProjectsCount() {
            document.getElementById('local-projects-count').textContent = projects.length;
        }

        async function testSupabaseConnection() {
            const url = document.getElementById('supabase-url').value.trim();
            const key = document.getElementById('supabase-key').value.trim();
            
            if (!url || !key) {
                showConfigStatus('Preencha todos os campos obrigatórios!', 'error');
                return;
            }
            
            showConfigStatus('Testando conexão...', 'info');
            
            try {
                const response = await fetch(`${url}/rest/v1/projects_backup?limit=1`, {
                    method: 'GET',
                    headers: {
                        'apikey': key,
                        'Authorization': `Bearer ${key}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    showConfigStatus('Conexão testada com sucesso!', 'success');
                } else if (response.status === 404) {
                    showConfigStatus('Tabela "projects_backup" não encontrada. Execute o SQL fornecido no Supabase.', 'warning');
                } else {
                    throw new Error(`Erro ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('Erro no teste de conexão:', error);
                showConfigStatus('Erro na conexão. Verifique as credenciais e tente novamente.', 'error');
            }
        }

        function showConfigStatus(message, type) {
            const statusElement = document.getElementById('config-status');
            const colors = {
                success: 'border border-gray-200 text-gray-800',
                error: 'border border-gray-200 text-gray-800',
                warning: 'border border-gray-200 text-gray-800',
                info: 'border border-gray-200 text-gray-800'
            };
            
            statusElement.className = `rounded-lg p-4 ${colors[type]}`;
            statusElement.textContent = message;
            statusElement.classList.remove('hidden');
            
            // Auto-hide após 5 segundos para mensagens de sucesso
            if (type === 'success') {
                setTimeout(() => {
                    statusElement.classList.add('hidden');
                }, 5000);
            }
        }

        // Formulário de configuração do Supabase
        document.getElementById('supabase-config-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const url = document.getElementById('supabase-url').value.trim();
            const key = document.getElementById('supabase-key').value.trim();
            
            if (!url || !key) {
                showConfigStatus('Preencha todos os campos obrigatórios!', 'error');
                return;
            }
            
            // Salvar configuração
            supabaseConfig.url = url;
            supabaseConfig.key = key;
            
            localStorage.setItem('supabase_url', url);
            localStorage.setItem('supabase_key', key);
            
            showConfigStatus('Configuração salva com sucesso!', 'success');
            updateConnectionStatus();
        });

        async function performBackup() {
            if (!supabaseConfig.url || !supabaseConfig.key) {
                alert('Configure o Supabase primeiro na aba "Configuração"!');
                return;
            }
            
            if (projects.length === 0) {
                alert('Não há projetos para fazer backup!');
                return;
            }
            
            const backupBtn = document.getElementById('backup-btn');
            const originalText = backupBtn.innerHTML;
            
            try {
                backupBtn.disabled = true;
                backupBtn.innerHTML = 'Fazendo backup...';
                
                // Preparar dados para backup
                const backupData = {
                    user_id: 'portfolio_user_' + Date.now(),
                    backup_date: new Date().toISOString(),
                    projects_count: projects.length,
                    projects_data: projects.map(project => ({
                        ...project,
                        images: project.images.length, // Apenas contar imagens
                        videoFile: project.videoFile ? true : false
                    }))
                };
                
                const response = await fetch(`${supabaseConfig.url}/rest/v1/projects_backup`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'apikey': supabaseConfig.key,
                        'Authorization': `Bearer ${supabaseConfig.key}`
                    },
                    body: JSON.stringify(backupData)
                });
                
                if (response.ok) {
                    alert('Backup realizado com sucesso!');
                    loadBackupHistory();
                } else {
                    throw new Error(`Erro ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('Erro no backup:', error);
                alert('Erro ao fazer backup. Verifique sua conexão e configurações.');
            } finally {
                backupBtn.disabled = false;
                backupBtn.innerHTML = originalText;
            }
        }

        async function loadBackupHistory() {
            if (!supabaseConfig.url || !supabaseConfig.key) {
                return;
            }
            
            try {
                const response = await fetch(`${supabaseConfig.url}/rest/v1/projects_backup?order=created_at.desc&limit=10`, {
                    method: 'GET',
                    headers: {
                        'apikey': supabaseConfig.key,
                        'Authorization': `Bearer ${supabaseConfig.key}`
                    }
                });
                
                if (response.ok) {
                    const backups = await response.json();
                    displayBackupHistory(backups);
                }
            } catch (error) {
                console.error('Erro ao carregar histórico:', error);
            }
        }

        function displayBackupHistory(backups) {
            const historyElement = document.getElementById('backup-history');
            
            if (backups.length === 0) {
                historyElement.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhum backup realizado ainda</p>';
                return;
            }
            
            historyElement.innerHTML = backups.map(backup => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                    <div>
                        <div class="font-medium text-gray-800">${backup.projects_count} projetos</div>
                        <div class="text-sm text-gray-500">${new Date(backup.backup_date).toLocaleString('pt-BR')}</div>
                    </div>
                    <div class="text-green-600">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>
            `).join('');
        }

        // Fechar modal de configuração ao clicar fora
        document.getElementById('supabase-config-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSupabaseConfig();
            }
        });

        // Função para exportar para Excel
        function exportToExcel() {
            if (projects.length === 0) {
                alert('Não há projetos para exportar!');
                return;
            }

            // Preparar dados para Excel com formatação melhorada
            const excelData = projects.map((project, index) => ({
                'Nº': index + 1,
                'ID do Projeto': project.id,
                'Título do Projeto': project.title,
                'Descrição Completa': project.description,
                'URL do Projeto': project.link || 'Não informado',
                'Data de Criação': project.date ? new Date(project.date).toLocaleDateString('pt-BR') : 'Não informada',
                'Data de Cadastro': project.createdAt ? new Date(project.createdAt).toLocaleDateString('pt-BR') : 'Não informada',
                'Hora de Cadastro': project.createdAt ? new Date(project.createdAt).toLocaleTimeString('pt-BR') : 'Não informada',
                'Quantidade de Imagens': project.images.length,
                'Possui Vídeo': project.video || project.videoFile ? 'Sim' : 'Não',
                'Tipo de Vídeo': project.video ? 'Link Externo' : project.videoFile ? 'Arquivo Local' : 'Nenhum',
                'Status do Link': project.link ? 'Disponível' : 'Não informado'
            }));

            // Criar HTML formatado para Excel
            let htmlContent = `
                <html>
                <head>
                    <meta charset="UTF-8">
                    <style>
                        table { border-collapse: collapse; width: 100%; font-family: 'Montserrat', sans-serif; }
                        th { background-color: #8e44ad; color: white; font-weight: bold; padding: 12px; border: 1px solid #ddd; text-align: center; }
                        td { padding: 10px; border: 1px solid #ddd; text-align: left; vertical-align: top; }
                        tr:nth-child(even) { background-color: #f9f9f9; }
                        tr:hover { background-color: #f5f5f5; }
                        .number { text-align: center; font-weight: bold; }
                        .date { text-align: center; }
                        .status-sim { color: #27ae60; font-weight: bold; }
                        .status-nao { color: #e74c3c; }
                    </style>
                </head>
                <body>
                    <h2 style="color: #8e44ad; text-align: center; margin-bottom: 20px;">Relatório de Projetos - ${new Date().toLocaleDateString('pt-BR')}</h2>
                    <table>
                        <thead>
                            <tr>`;

            // Adicionar cabeçalhos
            const headers = Object.keys(excelData[0]);
            headers.forEach(header => {
                htmlContent += `<th>${header}</th>`;
            });
            htmlContent += `</tr></thead><tbody>`;

            // Adicionar dados
            excelData.forEach(row => {
                htmlContent += '<tr>';
                headers.forEach(header => {
                    let cellClass = '';
                    let cellValue = row[header];
                    
                    // Aplicar classes CSS baseadas no conteúdo
                    if (header === 'Nº' || header === 'Quantidade de Imagens') {
                        cellClass = 'number';
                    } else if (header.includes('Data') || header.includes('Hora')) {
                        cellClass = 'date';
                    } else if (cellValue === 'Sim' || cellValue === 'Disponível') {
                        cellClass = 'status-sim';
                    } else if (cellValue === 'Não' || cellValue === 'Não informado' || cellValue === 'Nenhum') {
                        cellClass = 'status-nao';
                    }
                    
                    htmlContent += `<td class="${cellClass}">${cellValue}</td>`;
                });
                htmlContent += '</tr>';
            });

            htmlContent += `
                        </tbody>
                    </table>
                    <div style="margin-top: 20px; text-align: center; color: #666; font-size: 12px;">
                        <p>Total de projetos: ${projects.length}</p>
                        <p>Relatório gerado em: ${new Date().toLocaleString('pt-BR')}</p>
                    </div>
                </body>
                </html>`;

            // Download do arquivo
            const blob = new Blob([htmlContent], { type: 'application/vnd.ms-excel;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `Relatorio_Projetos_${new Date().toISOString().split('T')[0]}.xls`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            alert('Relatório Excel exportado com sucesso! Arquivo formatado com colunas organizadas.');
        }

        // Função para exportar para JSON
        function exportToJSON() {
            if (projects.length === 0) {
                alert('Não há projetos para exportar!');
                return;
            }

            // Preparar dados (sem as imagens em base64 para reduzir tamanho)
            const jsonData = {
                exportDate: new Date().toISOString(),
                totalProjects: projects.length,
                projects: projects.map(project => ({
                    ...project,
                    images: project.images.map((img, index) => `imagem_${project.id}_${index + 1}`),
                    videoFile: project.videoFile ? `video_${project.id}` : null
                }))
            };

            const jsonString = JSON.stringify(jsonData, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `projetos_backup_${new Date().toISOString().split('T')[0]}.json`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            alert('Backup JSON exportado com sucesso!');
        }



        // Função para carregar backup do localStorage
        function loadFromLocalStorage() {
            const savedProjects = localStorage.getItem('portfolio_projects');
            if (savedProjects) {
                try {
                    projects = JSON.parse(savedProjects);
                    renderProjects('projects-grid');
                    renderProjects('projects-only-grid');
                } catch (error) {
                    console.error('Erro ao carregar projetos salvos:', error);
                }
            }
        }

        // Função para salvar no localStorage
        function saveToLocalStorage() {
            try {
                localStorage.setItem('portfolio_projects', JSON.stringify(projects));
            } catch (error) {
                console.error('Erro ao salvar projetos:', error);
            }
        }

        // Inicializar campos de data com a data atual
        function initializeDateFields() {
            const today = new Date().toISOString().split('T')[0];
            const projectDateField = document.getElementById('project-date');
            const modalProjectDateField = document.getElementById('modal-project-date');
            
            if (projectDateField) projectDateField.value = today;
            if (modalProjectDateField) modalProjectDateField.value = today;
        }

        // Adicionar alguns projetos de exemplo
        window.addEventListener('load', function() {
            // Inicializar campos de data
            initializeDateFields();
            
            // Carregar projetos salvos primeiro
            loadFromLocalStorage();
            
            // Se não houver projetos salvos, adicionar exemplos
            if (projects.length === 0) {
                // Projeto de exemplo 1
                projects.push({
                    id: 1,
                    title: "Sistema de E-commerce",
                    description: "Plataforma completa de vendas online com painel administrativo, carrinho de compras e integração com pagamentos.",
                    link: "https://exemplo-ecommerce.com",
                    date: "2024-01-15",
                    createdAt: new Date().toISOString(),
                    images: ['data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjOGU0NGFkIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIyNCIgZm9udC1mYW1pbHk9Ik1vbnRzZXJyYXQiPkUtY29tbWVyY2U8L3RleHQ+Cjwvc3ZnPgo='],
                    video: null,
                    videoFile: null
                });

                // Projeto de exemplo 2
                projects.push({
                    id: 2,
                    title: "App Mobile de Delivery",
                    description: "Aplicativo móvel para delivery de comida com rastreamento em tempo real e sistema de avaliações.",
                    link: "https://exemplo-delivery.com",
                    date: "2024-02-20",
                    createdAt: new Date().toISOString(),
                    images: ['data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjZTkxZTYzIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIyNCIgZm9udC1mYW1pbHk9Ik1vbnRzZXJyYXQiPkRlbGl2ZXJ5IEFwcDwvdGV4dD4KPHN2Zz4K'],
                    video: null,
                    videoFile: null
                });
            }

            renderProjects('projects-grid');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9768ab0d7031f23f',t:'MTc1NjQzNTA2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
